
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>账号分析 - 用户中心</title>
    <meta name="description" content="OKCOPY，为盈利而生。">
    <meta name="keywords" content="OKCOPY">
    <meta name="author" content="金子信息">
    <link rel="icon" href="../img/favicon.ico">
    <link href="/Content/css?v=PUDFxlRUUS8e8pp6Y9WeVnF_4RmJM7BwtYyTz0D-zu81" rel="stylesheet" />

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    <script src="/bundles/jquery?v=FVs3ACwOLIVInrAl5sdzR2jrCDmVOWFbZMY6g6Q0ulE1"></script>

    <script src="/bundles/bootstrap?v=2Fz3B0iizV2NnnamQFrx-NbYJNTFeBJ2GM05SilbtQU1"></script>


    <link href="/Content/mcdetails.css?v=1.11" rel="stylesheet" />
    <style type="text/css">
        .dnone {
            display: none;
        }

        .pagination4 .page a, .pagination4 .page a:hover {
            width: 100px;
            text-align: center;
            border: 1px solid #ddd;
            color: #999;
            background-color: #fff !important;
        }
    </style>

    <link href="/Plugins/loadmask/loadmask.css" rel="stylesheet" />
    <script src="/Plugins/loadmask/loadmask.js"></script>
    <link href="/Style/style.css?v=2.2" rel="stylesheet" />

    <script src="/Plugins/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.min.js"></script>
    <script src="/Scripts/ECharts/echartsold.js"></script>
    <script src="/Scripts/jqPaginator.js"></script>
    <script src="/Scripts/date/moment.js"></script>
    <script src="/Plugins/laydate/laydate.js"></script>
    <script src="/Scripts/dateHelp.js"></script>
    <script type="text/javascript">
        laydate.render({
            elem: '#date_beg'
            , theme: '#393D49'
        });
        laydate.render({
            elem: '#date_end'
            , theme: '#393D49'
        });
    </script>

</head>
<body class="trader_user">





    <main class="container main_trader">
        <div class="row main_top">
            <div class="col-md-4">
                <div class="summary_head" style="height:346px">
                    <img style="height:62px" src=http://www.linkusfx.com/img/headImage/head1.jpg class="head_img">
                    <h4>和尚来了2</h4>
                    <img src="/img/underline.png" />
                    <p style="word-wrap:break-word">全自动EA交易，欢迎加入</p>
                    <h5>
                        交易账号：<span>
                            **********
                        </span>
                    </h5>
                    <h6 class=" first">平台名称：<span>GSGForex目外资本</span></h6>
                    <h6>杠杆比例：<span>1:500</span></h6>

                </div>
            </div>
            <div class="col-md-8 right_panel " style="height:346px">
                <div class="right_panel_top">
                    <div class="col-md-10">
                        <h5>交易组合可定制分析&gt;&gt;<span>全部</span></h5>
                    </div>
                    <div class="col-md-2 screen">
                        <button class="btn btn-warning btn-query" data-route="query" onclick="FilterEvent()">条件筛选</button>
                    </div>
                </div>
                <div id="JbasicInfo" class="right_panel_down query" data-query="info">
                    <h4>基本信息</h4>
                    <table>
                        <tbody>
                            <tr>
                                <td class="brr">收益率：</td>
                                <td class="gray brl"><strong class="red">2708.27%</strong></td>
                                <td class="brr">余额：</td>
                                <td class="gray brl">147785.65</td>
                            </tr>
                            <tr class="bgGray">
                                <td class="brr">绝对收益率：</td>
                                <td class="gray brl"><strong class="red">-4711.96%</strong></td>
                                <td class="brr">净值：</td>
                                <td class="gray brl">147785.65</td>
                            </tr>
                            <tr>
                                <td class="brr">日均收益率：</td>
                                <td class="gray brl">6.39%</td>
                                <td class="brr">最高净值： </td>
                                <td class="gray brl">148395.36 (2018-03-09)</td>
                            </tr>
                            <tr class="bgGray">
                                <td class="brr">月均收益率：</td>
                                <td class="gray brl">180.55%</td>
                                <td class="brr">利润：</td>
                                <td class="gray brl"><strong class="red">150990.05</strong></td>
                            </tr>
                            <tr>
                                <td class="brr">最大回撤率： </td>
                                <td class="gray brl">-17.50% (2018-02-16)</td>
                                <td class="brr">利息： </td>
                                <td class="gray brl"><strong class="green">-1702.19</strong></td>
                            </tr>
                            <tr class="bgGray">
                                <td class="brr">入金： </td>
                                <td class="gray brl">18795.60</td>
                                <td class="brr">最后交易：</td>
                                <td class="gray brl">2018-03-12 02:39:18</td>
                            </tr>
                            <tr>
                                <td class="brr">出金： </td>
                                <td class="gray brl">-22000.00</td>
                                <td class="brr">统计起始：</td>
                                <td class="gray brl">2017-01-11 12:05:06</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="Jfilter" class="right_panel_down_2 query" data-query="query" style="height:306px">
                    <div class="form panel-body">
                        <table class="table_Search">
                            <tbody>
                                <tr>
                                    <td>
                                        <label>
                                            <input type="radio" value="0" onclick="GetDate(0)" name="ftime" />
                                            最近一天
                                        </label>
                                    </td>
                                    <td>
                                        <label>
                                            <input type="radio" value="1" onclick="GetDate(1)" name="ftime" />
                                            最近一周
                                        </label>
                                    </td>
                                    <td>
                                        <label>
                                            <input type="radio" value="2" onclick="GetDate(2)" name="ftime" />
                                            最近3个月
                                        </label>
                                    </td>
                                    <td>
                                        <label>
                                            <input type="radio" value="3" onclick="GetDate(3)" name="ftime" />
                                            最近6个月
                                        </label>
                                    </td>
                                    <td>
                                        <label>
                                            <input type="radio" value="4" onclick="GetDate(4)" name="ftime" />
                                            最近一年
                                        </label>
                                    </td>
                                    <td>
                                        <label>
                                            <input type="radio" value="8" checked onclick="GetDate(8)" name="ftime" />
                                            全部
                                        </label>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table_time">
                            <tbody>
                                <tr>
                                    <td>&nbsp;&nbsp;&nbsp;&nbsp;开始时间&nbsp;&nbsp;</td>
                                    <td><input size="10" type="text" id="date_beg" value="2017-01-11" class="form-control form_datetime"></td>
                                    <td>&nbsp;&nbsp;到&nbsp;&nbsp;</td>
                                    <td><input size="10" type="text" id="date_end" value="2018-05-04" class="form-control form_datetime"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <input type="button" id="btnAnaly" value="分析" class="btn btn-primary">
                </div>
            </div>
        </div>

        <!--明细数据-->
        <div class="detail">
            <div id="jDataTab" class="hd">
                <ul>
                    <li class="on" data-value="0">收益情况</li>
                    <li data-value="1">月度分析报告</li>
                    <li onclick="tab3Click()" data-value="2">交易明细</li>

                    <div class="clearfix"></div>
                </ul>
            </div>
            <div class="bd" id="jcontent">
                <div class="conWrap" id="jPage">

                    <div id="page0" class="con">
                        <div class="second">
                            <div class="tab-hd">
                                <ul class="tab-nav" id="Jtab1">
                                    <li class="on" data-value="1" onclick="ShowGorwth(1)"><a href="javascript:void(0)">增长率</a></li>
                                    <li data-value="2" onclick="ShowBalance(1)"><a href="javascript:void(0)">余额</a></li>
                                    <li data-value="3" onclick="ShowProfit()"><a href="javascript:void(0)">利润</a></li>
                                    <li data-value="4" onclick="ShowWithdraw(1)"><a href="javascript:void(0)">资金回撤</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="growthrate_cont">
                            <div class="growthrate_btns growthrate_btnsBase" id="BaseGrowthRateDiv">
                                <button class="hover" type="button" id="GrowthYieldBtn">收益率</button>
                                <button type="button" id="GrowthHandBtn">手数</button>
                                <button type="button" id="GrowthPointBtn">点数</button>
                            </div>
                            <div class="chart_gro_box" id="UserBaseCharts" style="width: 100%; height: 345px;">
                                <!--第一个图表位置-->

                            </div>
                        </div>
                    </div>

                    <div id="page1" class="con dnone">
                        <div class="second">
                            <div class="tab-hd">
                                <ul class="tab-nav" id="Jtab2"></ul>
                            </div>
                        </div>
                        <div class="mc_report_cont">
                            <div class="growthrate_cont" style="padding-bottom:0;">
                                <div class="growthrate_btns growthrate_btnsMonth">
                                    <button class="hover" type="button" id="MonthProfitRateBtn">收益率</button>
                                    <button type="button" id="MonthProfitBtn">利润</button>
                                    <button type="button" id="MonthHandBtn">手数</button>
                                    <button type="button" id="MonthPointBtn">点数</button>
                                </div>



                                <div class="row chart_gro_box chart_gro_box3 chart_gro_box2 clearfix" style="width: 100%;">
                                    <div class="col-md-9 col-sm-9 col-xs-12 clearfix">
                                        <div id="MonthBaseCharts" style="height: 340px; width: 100%;">
                                            <!--月分析图表位置-->
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-6 clearfix">
                                        <div style="width:100%;height:340px;" id="TotalYearCharts" class="clearfix">
                                            <!--统计年 和 总的收益率-->
                                        </div>
                                    </div>
                                </div>

                                <!--交易-->
                                <div class="mc_transaction">
                                    <div id="jmonthdown" class="container1">
                                        <div class="mc_transaction_cont" style="padding-bottom:0;">
                                            <div class="mc_title_box mc_title_box2">
                                                <ul class="growthrate_ul hidden-xs">
                                                    <li id="jobs1" onclick="monthBase.GetMonthTradeData()" class="hover"><a href="javascript:void(0);">交易</a></li>
                                                    <li id="jobs2" onclick="monthBase.GetMonthSummary()"><a href="javascript:void(0);">摘要</a></li>
                                                    <li id="jobs3" onclick="hourBase.GetHourData()"><a href="javascript:void(0);">小时</a></li>
                                                    <li id="jobs4" onclick="dayBase.GetDayData(1)"><a href="javascript:void(0);">天</a></li>
                                                    <li id="jobs5" onclick="timeBase.GetTimeData(1)"><a href="javascript:void(0);">时间</a></li>
                                                </ul>
                                            </div>


                                            <div id="jcenter" class="growthrate_cont growthrate_cont2" style="margin-bottom:0; margin-top:0;">

                                                <div class="chart_gro_box">

                                                    <!--tabs交易-->
                                                    <div id="mcdetails_jobs_1" class="text_demand">
                                                        <div class="row mcdetails_row">
                                                            <!--第一列-->
                                                            <div class="transaction_sbox transaction_sbox1 col-sm-4 clearfix">
                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">平仓单：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="ClosePositionCount"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">盈亏对比：</label>
                                                                    <div class="probar_box paddlr0 col-xs-6">
                                                                        <div style="position:relative; width:150px; float:right;">
                                                                            <span style=" position:absolute;left:-100px; font-size:9px;top:-4px;" id="spleft">0%</span>
                                                                            <div class="probar_out" style="float:right; margin-right:35px;">
                                                                                <div class="probar_in">
                                                                                </div>
                                                                            </div>
                                                                            <span style="position:absolute;right:1px; font-size:9px; top:-4px;" id="spright">0%</span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">盈利点数：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="SumProfitPoint"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">平均获利：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="AverageProfit"></p>
                                                                        <!--22.54pips / $7.37-->
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">平均亏损：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="AverageDeficit"></p>
                                                                        <!---30.62pips / -$6.22-->
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">总手数：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="ClosePositionSum"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">总手续费：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="SumFee"></p>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <!--第二列-->
                                                            <div class="transaction_sbox transaction_sbox2 col-sm-4 clearfix">
                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">多单交易成功率：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p><span id="TotalBuyPositionRate"></span> <span class="little">(<span id="ProfitBuyPosition"></span> / <span id="TotalBuyPosition"></span>)</span></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">空单交易成功率：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p><span id="TotalSellPositionRate"></span> <span class="little">(<span id="ProfitSellPosition"></span> / <span id="TotalSellPosition"></span> )</span></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">最佳交易($)：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p><span id="BestPositionMoney"></span> [<span class="little" id="BestPositionMoneyTime"></span>]</p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">最差交易($)：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p><span id="WorstPositionMoney"></span> [<span class="little" id="WorstPositionMoneyTime"></span>]</p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">最佳交易(按点数)：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p><span id="BestPositionPoint"></span> [<span class="little" id="BestPositionPointTime"></span>]</p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">最差交易(按点数)：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p><span id="WorstPositionPoint"></span> [<span class="little" id="WorstPositionPointTime"></span>]</p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">平均持仓时间：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="AverageCreatePositionTime"></p>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!--第三列-->
                                                            <div class="transaction_sbox transaction_sbox1 col-sm-4 last clearfix">
                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">利润系数：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="SumProfitRate">0</p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">标准偏差：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="StandardDeviation"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">夏普比率：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="SharpRate"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">标准分数(出现概率)：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="StandardGrade"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">预期收益：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p><span id="AverageOnePoint"></span>/ <span id="AverageOneProfit"></span></p>

                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">平均收益率：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="ArithmeticAverageRate"></p>

                                                                    </div>
                                                                </div>

                                                                <div class="form-group clearfix" style="margin-bottom:0;">
                                                                    <label class="paddlr0 col-xs-6 control-label">持有期几何回报率：</label>
                                                                    <div class="paddlr0 col-xs-6">
                                                                        <p id="GeometryAverageRate"></p>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!--tabs摘要-->
                                                    <div id="mcdetails_jobs_2" class="text_demand hover" style="display:none;">
                                                        <div class="growthrate_btns growthrate_btnsAbstract" style="border-bottom:none;">
                                                            <button class="hover" onclick="SetABSType(1)" type="button">利润</button>
                                                            <button type="button" onclick="SetABSType(2)">点数</button>
                                                        </div>

                                                        <div class="mc_tran_tables mc_tran_tables_abs">
                                                            <!--响应式表格-->
                                                            <div class="trading_cont table-responsive">
                                                                <table width="100%" class="table publish_table publish_table_abs" style="margin-left: 0px" cellspacing="0" cellpadding="0">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="th_top"></th>
                                                                            <th class="th_top borderleft1" colspan="3">多头</th>
                                                                            <th class="th_top borderleft1" colspan="3">空头</th>
                                                                            <th class="th_top borderleft1" colspan="6">总</th>
                                                                        </tr>
                                                                        <tr>
                                                                            <th>货币</th>
                                                                            <th>交易</th>
                                                                            <th>点</th>
                                                                            <th>利润（$）</th>
                                                                            <th>交易</th>
                                                                            <th>点</th>
                                                                            <th>利润（$）</th>
                                                                            <th>交易</th>
                                                                            <th>点</th>
                                                                            <th>利润（$）</th>
                                                                            <th>成功（％）</th>
                                                                            <th>损失（％）</th>
                                                                            <th></th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="OrderTbodyTbody"></tbody>
                                                                </table>
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <!--tabs小时-->
                                                    <div id="mcdetails_jobs_3" class="text_demand" style="display:none;">
                                                        <div class="mc_title_box mc_title_box3 mc_title_box3m">

                                                            <ul class="growthrate_ul growthrate_ul3 hidden-xs growthrate_btnsHour">
                                                                <li class="hover" onclick="hourBase.SelectProfitAndLoss(1)"><a href="javascript:void(0);">盈利与亏损</a></li>
                                                                <li onclick="hourBase.SelectSellAndBuy(2)"><a href="javascript:void(0);">多单与空单</a></li>
                                                                <li onclick="hourBase.SelectSellAndBuyRate(3,1)"><a href="javascript:void(0);">多单收益与空单收益之比</a></li>
                                                                <li onclick="hourBase.SelectProfitAndLossRate(4,1)"><a href="javascript:void(0);">盈利与亏损之比</a></li>
                                                            </ul>

                                                            <ul class="growthrate_m growthrate_m3 hidden-md hidden-lg hidden-sm" style="z-index:9;">
                                                                <li>
                                                                    <a class="spinner_btn growthrate_m_on" href="javascript:void(0);">
                                                                        多单收益与空单收益之比
                                                                        <span class="glyphicon glyphicon-triangle-bottom"></span>
                                                                    </a>
                                                                    <ul class="growthrate_ul_m growthrate_ul_m3 growthrate_btnsHour">
                                                                        <li class="hover" onclick="hourBase.SelectProfitAndLoss(1)"><a href="javascript:void(0);">盈利与亏损</a></li>
                                                                        <li onclick="hourBase.SelectSellAndBuy(2)"><a href="javascript:void(0);">多单与空单</a></li>
                                                                        <li onclick="hourBase.SelectSellAndBuyRate(3,1)"><a href="javascript:void(0);">多单收益与空单收益之比</a></li>
                                                                        <li onclick="hourBase.SelectProfitAndLossRate(4,1)"><a href="javascript:void(0);">盈利与亏损之比</a></li>
                                                                    </ul>
                                                                </li>
                                                            </ul>

                                                            <div class="growthrate_btns growthrate_btns3 growthrate_btnsHourSub" id="HourSubOption" style="display:none;">
                                                                <button class="hover" type="button" onclick="hourBase.HourSubOption(1)">点数</button>
                                                                <button type="button" onclick="hourBase.HourSubOption(2)">收益额</button>
                                                                <button type="button" onclick="hourBase.HourSubOption(3)">收益率</button>
                                                            </div>
                                                        </div>
                                                        <div id="HourChart" style="height: 280px; padding-bottom: 10px;">
                                                            <!--时间图表-->

                                                        </div>
                                                    </div>

                                                    <!--tabs天-->
                                                    <div id="mcdetails_jobs_4" class="text_demand" style="display:none;">
                                                        <div class="mc_title_box mc_title_box3 mc_title_box3m">

                                                            <ul class="growthrate_ul growthrate_ul3 hidden-xs growthrate_btnsDay">
                                                                <li class="hover" onclick="dayBase.SelectProfitAndLoss(1)"><a href="javascript:void(0);">盈利与亏损</a></li>
                                                                <li onclick="dayBase.SelectSellAndBuy(2)"><a href="javascript:void(0);">多单与空单</a></li>
                                                                <li onclick="dayBase.SelectSellAndBuyRate(3, 1)"><a href="javascript:void(0);">多单收益与空单收益之比</a></li>
                                                                <li onclick="dayBase.SelectProfitAndLossRate(4, 1)"><a href="javascript:void(0);">盈利与亏损之比</a></li>
                                                            </ul>

                                                            <ul class="growthrate_m growthrate_m3 hidden-md hidden-lg hidden-sm" style="z-index:9;">
                                                                <li>
                                                                    <a class="spinner_btn growthrate_m_on" href="javascript:void(0);">
                                                                        多单收益与空单收益之比
                                                                        <span class="glyphicon glyphicon-triangle-bottom"></span>
                                                                    </a>
                                                                    <ul class="growthrate_ul_m growthrate_ul_m3 growthrate_btnsDay">
                                                                        <li class="hover" onclick="dayBase.SelectProfitAndLoss(1)"><a href="javascript:void(0);">盈利与亏损</a></li>
                                                                        <li onclick="dayBase.SelectSellAndBuy(2)"><a href="javascript:void(0);">多单与空单</a></li>
                                                                        <li onclick="dayBase.SelectSellAndBuyRate(3, 1)"><a href="javascript:void(0);">多单收益与空单收益之比</a></li>
                                                                        <li onclick="dayBase.SelectProfitAndLossRate(4, 1)"><a href="javascript:void(0);">盈利与亏损之比</a></li>
                                                                    </ul>
                                                                </li>
                                                            </ul>

                                                            <div class="growthrate_btns growthrate_btns3 growthrate_btnsDaySub" id="DaySubOption" style="display:none;">
                                                                <button class="hover" type="button" onclick="dayBase.DaySubOption(1)">点数</button>
                                                                <button type="button" onclick="dayBase.DaySubOption(2)">收益额</button>
                                                                <button type="button" onclick="dayBase.DaySubOption(3)">收益率</button>
                                                            </div>
                                                        </div>
                                                        <div id="DayChart" style="width: auto; height: 280px; padding-bottom: 10px;">
                                                            <!--天的图表-->

                                                        </div>
                                                    </div>

                                                    <!--tabs时间-->
                                                    <div id="mcdetails_jobs_5" class="text_demand" style="display:none;">
                                                        <div class="mc_title_box mc_title_box3 mc_title_box3m">

                                                            <div class="growthrate_btns growthrate_btns3 growthrate_btnsTime">
                                                                <button class="hover" type="button" onclick="timeBase.GetTimeData(1)">收益率</button>
                                                                <button type="button" onclick="timeBase.GetTimeData(2)">点</button>
                                                                <button type="button" onclick="timeBase.GetTimeData(3)">利润</button>
                                                                <button type="button" onclick="timeBase.GetTimeData(4)">手</button>
                                                            </div>
                                                        </div>
                                                        <!--时间图片-->
                                                        <div id="TimeChart" style=" height: 280px; padding-bottom: 10px;">
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                            <!--货币种类受欢迎程度 start-->
                                            <div class="growthrate_cont growthrate_cont3" style="padding-top:0;">
                                                <div class="chart_gro_box" style="margin-right:5px;">
                                                    <div class="currencyt clearfix">
                                                        <div class="currencyt_left  col-lg-5 col-md-5 col-xm-5 col-xs-12">
                                                            <div class="currencyt_left_up" style="height: 20px; text-align: center;">
                                                                <span style="font-size: 16px; color: #337ab7; position: relative; top: 15px;" id="MonthTitle"></span>
                                                            </div>
                                                            <div class="currencyt_left_down" style="height: 320px; position: relative; top: -20px" id="CurrencyChart"></div>
                                                        </div>
                                                        <div class="currencyt_right col-lg-7 col-md-7 col-xm-7 col-xs-12 clearfix" style="position: relative; top: -20px;">
                                                            <div class="currencyt_right_up" style="height: 340px;" id="BuyAndSellLongTimeChart">

                                                            </div>
                                                            <div class="currencyt_right_down" style="display:none">

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clear"></div>

                                            <!--货币种类受欢迎程度 end-->

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="page2" class="con dnone">
                        <div class="second">
                            <div class="tab-hd">
                                <ul class="tab-nav" id="jtab3">
                                    <li onclick="openOrders()" data-value="1" class="on"><a href="javascript:void(0)">持仓（<span id="openCouSpan">0</span>）</a></li>
                                    <li onclick="closedHist()" data-value="2"><a href="javascript:void(0)">历史（<span id="closeCouSpan">0</span>）</a></li>
                                    <li onclick="positionOrders()" data-value="3"><a href="javascript:void(0)">净头寸</a></li>
                                </ul>
                            </div>

                            <div id="tb3content">
                                <div id="tab3page1" class="tab-pal tab-bdn">
                                    <table class="table100 table-striped text-center table-responsive" style="width:100%">
                                        <thead>
                                            <tr class="bgBlue">
                                                <th>订单</th>
                                                <th>品种</th>
                                                <th>类型</th>
                                                <th>手数</th>
                                                <th>开仓时间</th>
                                                <th>建仓价</th>
                                                <th>手续费</th>
                                                <th>库存费</th>
                                                <th>盈亏</th>
                                            </tr>
                                        </thead>
                                        <tbody id="openDt"></tbody>
                                    </table>
                                    <div class="text-right" style="height:50px">
                                        <div style="float:left; margin:18px 0">
                                            <div class=" total" id="OpenTotal"></div>
                                        </div>
                                        <ul class="pagination  pagination4" id="pagination1"></ul>
                                    </div>

                                </div>

                                <div id="tab3page2" class="tab-bdn dnone">
                                    <div class="tab-pal">
                                        <table class="table100 table-striped text-center table02 table-responsive" style="width:100%">
                                            <thead>
                                                <tr class="bgBlue">
                                                    <th>订单</th>
                                                    <th>品种</th>
                                                    <th>类型</th>
                                                    <th>手数</th>
                                                    <th>建仓时间</th>
                                                    <th>平仓时间</th>
                                                    <th>建仓价</th>
                                                    <th>平仓价</th>
                                                    <th>手续费</th>
                                                    <th>库存费</th>
                                                    <th>盈亏</th>
                                                    <th>收益率</th>
                                                </tr>
                                            </thead>
                                            <tbody id="closdDt"></tbody>
                                        </table>
                                        <div class="text-right" style="height:50px">
                                            <div style="float:left; margin:18px 0">
                                                <div class=" total" id="ClosedTotal"></div>
                                            </div>
                                            <div style="width:300px; float:right"><ul class="pagination  pagination4" id="pagination2"></ul></div>
                                        </div>

                                    </div>
                                </div>

                                <div id="tab3page3" class="tab-bdn dnone">
                                    <div class="tab-pal">
                                        <table class="table100 table-striped text-center table02 table-responsive" style="width:100%">
                                            <thead>
                                                <tr class="bgBlue">
                                                    <th>品种</th>
                                                    <th>类型</th>
                                                    <th>手数</th>
                                                    <th>建仓价</th>
                                                    <th>点数</th>
                                                    <th>手续费</th>
                                                    <th>库存费</th>
                                                    <th>盈亏</th>
                                                    <th>收益率</th>
                                                </tr>
                                            </thead>
                                            <tbody id="positionDt"></tbody>
                                        </table>
                                        <div class="text-right">
                                            <ul class="pagination  pagination4" id="pagination3"></ul>
                                        </div>
                                    </div>

                                </div>

                            </div>



                        </div>

                    </div>

                    <div id="page3" class="con dnone">
                        <div class="second">
                            <div class="tab-hd">
                                <table>
                                    <tr>
                                        <td width="650px"></td>
                                        <td style="padding:0; margin:0; padding-right:10px">品种名称:</td>
                                        <td style="padding:0; margin:0; padding-right:10px"><input type="text" id="symbolName" style="height:25px; width:110px" class="form-control" />  </td>
                                        <td style="padding:0; margin:0"><input type="button" style="height:25px; line-height:12px" class="btn btn-success" id="btn-Search" onclick="SearchBind()" data-btn="search" value="查询"></td>
                                        <td>平均成本：<span id="CostAvg"></span></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="tab-pal tab-bdn">
                                <table class="table100 table-striped text-center table-responsive" style="width:100%">
                                    <thead>
                                        <tr class="bgBlue">
                                            <th>时间</th>
                                            <th>品种</th>
                                            <th>交易成本</th>
                                        </tr>
                                    </thead>
                                    <tbody id="TradeCost"></tbody>
                                </table>
                                <div class="text-right" style="height:50px">
                                    <ul class="pagination  pagination4" id="pagination5"></ul>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!--月交易 摘要start-->
                <table style="display:none">
                    <tbody id="MonthSummaryTemplate">
                        <tr class="$CLassOddOrEven$">
                            <td>$Currency$</td>
                            <td class="borderleft1">$BuyCount$</td>
                            <td class="green">$BuyPoint$</td>
                            <td class="green">$BuyProfit$</td>
                            <td class="borderleft1">$SellCount$</td>
                            <td class="green">$SellPonint$</td>
                            <td class="green">$SellProfit$</td>
                            <td class="borderleft1">$TotalOrderCount$</td>
                            <td class="green">$TotalPointCount$</td>
                            <td class="green">$TotalProfitMoney$</td>
                            <td class="green bggreen">$Success$($SuccessRate$%)</td>
                            <td class="red bgred">$Loss$($LossRate$%)</td>
                            <td class="abs_dropdown_box"><a class="abs_dropdown" onclick="ShowMonthABS(this, $Index$, '$ProductName$')" href="javascript:void(0);"></a></td>
                        </tr>
                        <tr class="abs_chart">
                            <td colspan="13">
                                <div id="$ABSChartsID$" style="width: 100%; height: 240px;"></div>
                            </td>
                        </tr>
                    </tbody>

                </table>
                <!--月交易 摘要end-->
                <!--交易明细 持仓表数据 start-->
                <table style="display:none">
                    <thead id="OrderTheadTemplate">
                        <tr>
                            <!--说明：排序小图标class有on时显示，没有on时隐藏。-->
                            <th>订单</th>
                            <th>开仓时间</th>
                            <th>品种</th>
                            <th>类型</th>
                            <th>手数</th>
                            <th>建仓价</th>
                            <th>止损</th>
                            <th>止盈</th>
                            <th>盈亏</th>
                            <th>手续费</th>
                            <th>库存费</th>
                            <th>收益率</th>
                        </tr>
                    </thead>
                    <tbody id="OrderTbodyTemplate">
                        <tr>
                            <td>$OrderTicket$</td>
                            <td>$OrderOpenTime$</td>
                            <td>$OrderSubSymbol$</td>
                            <td class="OrderType">OrderType</td>
                            <td>$OrderLots$</td>
                            <td>$OrderOpenPrice$</td>
                            <td>$OrderStopLoss$</td>
                            <td>$OrderTakeProfit$</td>
                            <td>$OrderProfit$</td>
                            <td>$OrderCommission$</td>
                            <td>$OrderStock$</td>
                            <td class="$OneEarningsRateClass$">$OneEarningsRate$</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script type="text/javascript">
            //时间戳转换成 yyyy/MM/dd
            function GetLocaleDate(date) {
                return new Date(parseInt(date.substr(6, 13))).toLocaleDateString();
            }

            var mt4 = "88012452";       //帐号
            var platform = "114";  //平台
            var mt4EarningData; //mt4收益率数据
            var startTime ="2017-01-11";//开始的时间
            var endTime = "2018-05-04";//结束的时间
            var clearingTime = "2018/3/12 7:51:05";
            var myChart;
            var tab = 0;//0 增长率 ，1 余额 ，2 利润 ，3 资金回撤 ，4 排名
            var year = "2018";//当前选择的年份
            var month = 0;

            $(function () {
                HandleBase(tab, 1);
                SetPageHeightAuto();
                //点击收益率
                $("#GrowthYieldBtn").click(function () {
                    SetGrowthSubClass();
                    $("#GrowthYieldBtn").addClass("hover");
                    HandleBase(tab, 1);
                });

                //点击手数
                $("#GrowthHandBtn").click(function () {
                    SetGrowthSubClass();
                    $("#GrowthHandBtn").addClass("hover");
                    HandleBase(tab, 2);
                });

                //点击点数
                $("#GrowthPointBtn").click(function () {
                    SetGrowthSubClass();
                    $("#GrowthPointBtn").addClass("hover");
                    HandleBase(tab, 3);
                })


                //月份收益率
                $("#MonthProfitRateBtn").click(function () {
                    SetMonthSubClass(1);

                    monthBase.Init();

                    if (monthBase.MonthBaseData == null)
                        monthBase.GetMonthData();

                    //月份统计
                    monthBase.ParseAndRender(monthBase.MonthBaseData, 1);
                    //年份收益率统计
                    yearTotalCharts.RenderChart(1);
                })

                //月份收益
                $("#MonthProfitBtn").click(function () {
                    SetMonthSubClass(2);

                    monthBase.Init();
                    if (monthBase.MonthBaseData == null)
                        monthBase.GetMonthData();

                    //月份收益统计
                    monthBase.ParseAndRender(monthBase.MonthBaseData, 2);
                    //年份收益统计
                    yearTotalCharts.RenderChart(2);
                })

                //月份手数
                $("#MonthHandBtn").click(function () {
                    SetMonthSubClass(3);

                    monthBase.Init();
                    if (monthBase.MonthBaseData == null)
                        monthBase.GetMonthData();

                    //月份手数统计
                    monthBase.ParseAndRender(monthBase.MonthBaseData, 3);
                    //年份手数统计
                    yearTotalCharts.RenderChart(3);
                })

                //月份点数
                $("#MonthPointBtn").click(function () {
                    SetMonthSubClass(4);

                    monthBase.Init();
                    if (monthBase.MonthBaseData == null)
                        monthBase.GetMonthData();

                    //月份点数统计
                    monthBase.ParseAndRender(monthBase.MonthBaseData, 4);
                    //年份点数统计
                    yearTotalCharts.RenderChart(4);
                })

                $(".growthrate_ul_m > li").click(function () {
                    $(this).siblings().removeClass("hover").end().addClass("hover");
                    $(this).parent().siblings().find("i").html($(this).find("a").html());
                });

                $(".growthrate_ul > li").click(function () {
                    $(this).siblings().removeClass("hover").end().addClass("hover");
                });

                $(".growthrate_btnsMonth > button,.growthrate_btnsAbstract > button ,.growthrate_btnsTime > button,.growthrate_btnsDay > button,.growthrate_btnsHourSub > button,.growthrate_btnsDaySub > button").click(function () {
                    $(this).siblings().removeClass("hover").end().addClass("hover");
                });

            });

            function FilterEvent()
            {
                if ($("#JbasicInfo").is(':hidden')) {
                    $("#Jfilter").css("display", "none");
                    $("#JbasicInfo").css("display", "block");
                } else
                {
                    $("#Jfilter").css("display", "block");
                    $("#JbasicInfo").css("display", "none");

                }
            }

            //显示增长率_收益率图表 type 1 收益率 2手数 3点数
            function ShowGorwth(type) {

                if (type == 1) {
                    $(".growthrate_btnsBase > button").siblings().removeClass("hover");
                    $("#GrowthYieldBtn").addClass("hover");
                }

                $("#BaseGrowthRateDiv").show();

                tab = 0;
                SetSubBaseBtnTitle(tab);
                try {
                    chartsInfo.Init();
                } catch (e) {
                    //alert(e);
                }

                if (mt4EarningData == null || mt4EarningData == "")
                    chartsInfo.GetDataMT4Earning(startTime, endTime);

                chartsInfo.ChartsPoint(mt4EarningData, type);
            }

            //显示余额绘图
            function ShowBalance(type) {
                if (type == 1) {
                    $(".growthrate_btnsBase > button").siblings().removeClass("hover");
                    $("#GrowthYieldBtn").addClass("hover");
                }

                $("#BaseGrowthRateDiv").show();
                tab = 1;
                SetSubBaseBtnTitle(tab);
                chartsInfo.Init();

                if (mt4EarningData == null || mt4EarningData == "")
                    chartsInfo.GetDataMT4Earning(startTime, endTime);

                chartsInfo.ChartsBalance(mt4EarningData, type);
            }

            //显示利润图表
            function ShowProfit() {
                $("#BaseGrowthRateDiv").hide();
                tab = 2;
                SetSubBaseBtnTitle(tab);
                chartsInfo.Init();

                if (mt4EarningData == null || mt4EarningData == "")
                    chartsInfo.GetDataMT4Earning(startTime, endTime);

                chartsInfo.ChartsProfit(mt4EarningData);
            }

            //显示资金回撤图表
            function ShowWithdraw(type) {

                if (type == 1) {
                    $(".growthrate_btnsBase > button").siblings().removeClass("hover");
                    $("#GrowthYieldBtn").addClass("hover");
                }

                tab = 3;
                SetSubBaseBtnTitle(tab);
                chartsInfo.Init();

                if (mt4EarningData == null || mt4EarningData == "")
                    chartsInfo.GetDataMT4Earning(startTime, endTime);

                chartsInfo.ChartsWithdraw(mt4EarningData, type);
            }

    </script>

    <script type="text/javascript">
            //设置副标题按钮的title
            function SetSubBaseBtnTitle(tab) {
                //资金回撤
                if (tab == 3) {
                    $("#GrowthYieldBtn").html("百分百");
                    $("#GrowthHandBtn").html("金额");
                    $("#GrowthPointBtn").html("点");
                } else {
                    $("#GrowthYieldBtn").html("收益率");
                    $("#GrowthHandBtn").html("手数");
                    $("#GrowthPointBtn").html("点数");
                }

                $("#RankSubDiv").hide();
                $("#BaseGrowthRateDiv").hide();

                //排名
                if (tab == 4) {
                    $("#RankSubDiv").show();
                } else if (tab != 2) {
                    $("#BaseGrowthRateDiv").show();
                }
            }

            //处理程序
            function HandleBase(tab, type) {
                switch (tab) {
                    case 0://增长率
                        ShowGorwth(type);
                        break;
                    case 1://余额
                        ShowBalance(type);
                        break;
                    case 2://利润
                        break;
                    case 3://资金回撤
                        ShowWithdraw(type)
                        break;
                    case 4://排名
                        break;
                    default:

                }
            }

            //设置增长率子栏目的class
            function SetGrowthSubClass() {
                $("#GrowthPointBtn").removeClass("hover");
                $("#GrowthHandBtn").removeClass("hover");
                $("#GrowthYieldBtn").removeClass("hover");
            }

            //设置子栏目的class
            function SetRankSubClass(type) {
                $("#DayRankBtn").removeClass("hover");
                $("#WeekRankBtn").removeClass("hover");
                $("#MonthBtn").removeClass("hover");
                $("#QuarterBtn").removeClass("hover");
                $("#YearBtn").removeClass("hover");

                if (type == 1)
                    $("#DayRankBtn").addClass("hover");
                else if (type == 2)
                    $("#WeekRankBtn").addClass("hover");
                else if (type == 3)
                    $("#MonthBtn").addClass("hover");
                else if (type == 4)
                    $("#YearBtn").addClass("hover");
                else if (type == 5)
                    $("#QuarterBtn").addClass("hover");

            }

            //绘图基类
            var chartsInfo = {
                //初始化
                Init: function () {
                    $("#UserBaseCharts").html("");
                    myChart = echarts.init(document.getElementById('UserBaseCharts'));
                    optionBaseInfo.legend.data = [];
                    optionBalanceInfo.legend.data = [];
                    optionProfitInfo.legend.data = [];
                },
                //得到mt4收益率的数据
                GetDataMT4Earning: function (startTime, endTime) {
                    $.ajax({
                        url: '/Home/SearchAccountDayEarning',
                        data: { "MTAccount": mt4, "PlatID": platform, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime },
                        type: 'post',
                        async: false,
                        beforeSend: function () { $("#jcontent").mask("Loging..."); },
                        complete: function () { $("#jcontent").unmask(); },
                        success: function (data) {
                            mt4EarningData = data.data;
                        }
                    })
                },
                //绘制增长率图表 type 1 收益率 2手数 3点数
                ChartsPoint: function (mt4Earning, type) {
                    var seriesName;
                    switch (type) {
                        case 1:
                            seriesName = "收益率";
                            break;
                        case 2:
                            seriesName = "手数";
                            break;
                        case 3:
                            seriesName = "点数";
                            break;
                        default:

                    }

                    optionBaseInfo.legend.data.push("净值增长率");
                    optionBaseInfo.legend.data.push("收益增长率");
                    optionBaseInfo.legend.data.push(seriesName);

                    optionBaseInfo.series[0].name = seriesName;
                    optionBaseInfo.series[1].name = "净值增长率";
                    optionBaseInfo.series[2].name = "收益增长率";

                    optionBaseInfo.xAxis.data = [];
                    optionBaseInfo.series[0].data = [];
                    optionBaseInfo.series[1].data = [];
                    optionBaseInfo.series[2].data = [];

                    //mt4收益率图表
                    $.each(mt4Earning, function () {

                        //结算的日期
                        optionBaseInfo.xAxis.data.push(GetLocaleDate(this.ClearingDate));

                        if (type == 1) {
                            //柱形图数据代表 每天平仓盈亏金额之和。
                            optionBaseInfo.series[0].data.push(this.ProfitRate * 100);
                        } else if (type == 2) {
                            optionBaseInfo.series[0].data.push(this.TodayHandCount);
                        }
                        else if (type == 3) {
                            //点数
                            optionBaseInfo.series[0].data.push(this.TodayPointCount);
                        }

                        optionBaseInfo.series[1].data.push((this.ProfitGrowthRate * 100).toFixed(2));
                        optionBaseInfo.series[2].data.push((this.ProfitGrowthRate * 100).toFixed(2));
                    })

                    optionBaseInfo.tooltip.trigger = 'axis';
                    optionBaseInfo.tooltip.formatter = function (params, ticket, callback) {

                        var paramsStr = "";

                        var i = 0;
                        $.each(params, function () {

                            i++;
                            if (i == 1)
                                paramsStr = this.name + "<br />";

                            if (this.seriesName == "收益增长率") {
                                paramsStr += this.seriesName + "：" + this.value + "%<br />";
                            }
                            else if (this.seriesName == "净值增长率") {
                                paramsStr += this.seriesName + "：" + this.value + "%<br />";
                            }
                            else if (this.seriesName == "手数") {
                                paramsStr += this.seriesName + "：" + (Number(this.value)).toFixed(2) + "手<br />";
                            }
                            else if (this.seriesName == "点数") {
                                paramsStr += this.seriesName + "：" + (Number(this.value)).toFixed(2) + "点<br />";
                            }
                            else if (this.seriesName == "收益率") {
                                paramsStr += this.seriesName + "：" + (Number(this.value)).toFixed(2) + "%<br />";
                            }
                            else
                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;
                    }

                    optionBaseInfo.yAxis.axisLabel.formatter = '{value} %';
                    myChart.setOption(optionBaseInfo);

                    myChart.on("legendselectchanged",
                        function (param) {
                            if (type == 2 || type == 3) {
                                if ((!param.selected["净值增长率"] && !param.selected["收益增长率"]) && (param.selected["手数"] || param.selected["点数"])) {
                                    optionBaseInfo.yAxis.axisLabel.formatter = "{value}";
                                    //optionBaseInfo.yAxis.max = Math.max.apply(null, optionBaseInfo.series[0].data) + 1;
                                    //var arr = [];
                                    //$.each(optionBaseInfo.series[0].data,
                                    //    function() {
                                    //        arr.push((this / 10).toFixed(2));
                                    //    });
                                    //optionBaseInfo.series[0].data = arr;
                                }
                                if (param.selected["净值增长率"] || param.selected["收益增长率"]) {
                                    optionBaseInfo.yAxis.axisLabel.formatter = '{value} %';
                                }
                                myChart.setOption(optionBaseInfo);
                            }
                        });

                },
                //绘制余额图表
                ChartsBalance: function (mt4Earning, type) {
                    var seriesName;

                    switch (type) {
                        case 1:
                            seriesName = "收益率";
                            break;
                        case 2:
                            seriesName = "手数";
                            break;
                        case 3:
                            seriesName = "点数";
                            break;
                        default:

                    }
                    optionBalanceInfo.legend.data.push("净值");
                    optionBalanceInfo.legend.data.push("余额");
                    optionBalanceInfo.legend.data.push(seriesName);

                    optionBalanceInfo.xAxis.data = [];
                    optionBalanceInfo.series[0].data = [];
                    optionBalanceInfo.series[1].data = [];
                    optionBalanceInfo.series[2].data = [];
                    optionBalanceInfo.series[2].name = seriesName;

                    var count = mt4Earning.length;
                    var i = 0;

                    $.each(mt4Earning, function () {

                        i++;

                        //结算的日期
                        optionBalanceInfo.xAxis.data.push(GetLocaleDate(this.ClearingDate));

                        if (type == 1) {
                            //收益率
                            optionBalanceInfo.series[2].data.push((this.ProfitRate * 100));
                        } else if (type == 2) {
                            optionBalanceInfo.series[2].data.push((this.TodayHandCount));
                        }
                        else if (type == 3) {
                            //点数
                            optionBalanceInfo.series[2].data.push(this.TodayPointCount.toFixed(2));
                        }
                        //if (i == count && this.EndNetValue > 0) {

                        //    当天的净值要保持一致
                        //    var _endBalance = mt4Base.MT4Info.EndBalance;
                        //    var _endNetValue = mt4Base.MT4Info.EndEquity;

                        //    optionBalanceInfo.series[0].data.push((Number(_endNetValue) / 1000).toFixed(2));
                        //    optionBalanceInfo.series[1].data.push((Number(_endBalance) / 1000).toFixed(2));

                        //} else {
                        optionBalanceInfo.series[0].data.push((this.EndEquity / 1000).toFixed(2));
                        optionBalanceInfo.series[1].data.push((this.EndBalance / 1000).toFixed(2));
                        //}

                    })

                    optionBalanceInfo.tooltip.formatter = function (params, ticket, callback) {

                        //if (params.seriesName == "净值") {
                        //    return params.name + "<br />" + params.seriesName + "：" + params.value + "K";
                        //}
                        //else if (params.seriesName == "余额") {
                        //    return params.name + "<br />" + params.seriesName + "：" + params.value + "K";
                        //}
                        //else if (params.seriesName == "手数") {
                        //    return params.name + "<br />" + params.seriesName + "：" + params.value * 10 + "手";
                        //}
                        //else if (params.seriesName == "点数") {
                        //    return params.name + "<br />" + params.seriesName + "：" + params.value + "点";
                        //}
                        //else
                        //    return params.name + "<br />" + params.seriesName + "：" + params.value;

                        var paramsStr = "";

                        var i = 0;

                        $.each(params, function () {

                            i++;
                            if (i == 1) {

                                paramsStr = this.name + "<br />";
                            }

                            if (this.seriesName == "净值") {
                                paramsStr += this.seriesName + "：" + this.value + "K<br />";
                            }
                            else if (this.seriesName == "余额") {
                                paramsStr += this.seriesName + "：" + this.value + "K<br />";
                            }
                            else if (this.seriesName == "手数") {
                                paramsStr += this.seriesName + "：" + (Number(this.value)).toFixed(2) + "手<br />";
                            }
                            else if (this.seriesName == "点数") {
                                paramsStr += this.seriesName + "：" + (Number(this.value)).toFixed(2) + "点<br />";
                            }
                            else if (this.seriesName == "收益率") {
                                paramsStr += this.seriesName + "：" + (Number(this.value)).toFixed(2) + "%<br />";
                            }
                            else if (this.seriesName != null && this.seriesName != "")
                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;

                    }
                    optionBalanceInfo.yAxis.axisLabel.formatter = '{value}K';
                    // 使用刚指定的配置项和数据显示图表。
                    myChart.setOption(optionBalanceInfo);
                    myChart.on("legendselectchanged",
                        function (param) {
                            if (param.selected["手数"] || param.selected["点数"]) {
                                optionBalanceInfo.yAxis.axisLabel.formatter = "{value}";
                            }
                            if (param.selected["收益率"]) {
                                optionBalanceInfo.yAxis.axisLabel.formatter = "{value}%";
                            }
                            if (param.selected["净值"] || param.selected["余额"]) {
                                optionBalanceInfo.yAxis.axisLabel.formatter = '{value}K';
                            }
                            myChart.setOption(optionBalanceInfo);
                        });
                },
                //绘制利润图表
                ChartsProfit: function (mt4Earning) {
                    var sumProfit = 0;

                    optionProfitInfo.xAxis.data = [];
                    optionProfitInfo.series[0].data = [];
                    optionProfitInfo.series[1].data = [];

                    var thousandValue = 1;
                    var thousandKey = '';

                    $.each(mt4Earning, function () {
                        if (this.TodaySumProfit >= 1000) {
                            thousandValue = 1000;
                            thousandKey = 'K';
                        }
                    });

                    optionProfitInfo.yAxis.axisLabel.formatter = '{value} ' + thousandKey;

                    $.each(mt4Earning, function () {

                        //结算的日期
                        optionProfitInfo.xAxis.data.push(GetLocaleDate(this.ClearingDate));

                        optionProfitInfo.series[1].data.push((this.TodaySumProfit / thousandValue).toFixed(2));//柱形图数据 为每天的平仓后盈亏之和

                        sumProfit += this.TodaySumProfit;//曲线图，每天平仓后盈亏之和 再相加

                        optionProfitInfo.series[0].data.push((sumProfit / thousandValue).toFixed(2));

                    })

                    optionProfitInfo.tooltip.formatter = function (params, ticket, callback) {

                        var paramsStr = "";

                        var i = 0;
                        //['平仓盈亏之和累计', '平仓盈亏之和']
                        $.each(params, function () {

                            i++;
                            if (i == 1)
                                paramsStr = this.name + "<br />";

                            if (this.seriesName == "平仓盈亏之和累计") {
                                paramsStr += this.seriesName + "：" + this.value + thousandKey + "<br />";
                            }
                            else if (this.seriesName == "平仓盈亏之和") {
                                paramsStr += this.seriesName + "：" + this.value + thousandKey + "<br />";
                            }
                            else if (this.seriesName != "" && this.seriesName != null)
                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;
                    }


                    // 使用刚指定的配置项和数据显示图表。
                    myChart.setOption(optionProfitInfo);

                },
                //绘制资金回撤图表
                ChartsWithdraw: function (mt4Earning, type) {

                    var seriesName;

                    switch (type) {
                        case 1:
                            seriesName = "百分百";
                            break;
                        case 2:
                            seriesName = "金额";
                            break;
                        case 3:
                            seriesName = "点数";
                            break;
                        default:

                    }

                    optionWithdrawInfo.legend.data = [];
                    optionWithdrawInfo.legend.data.push(seriesName);
                    optionWithdrawInfo.xAxis.data = [];
                    optionWithdrawInfo.series[0].data = [];
                    optionWithdrawInfo.series[0].name = seriesName;

                    var thousandValue = 1;
                    var thousandKey = '';

                    //如果资金回撤有值大于1000 采用K值。
                    if (type == 2) {
                        $.each(mt4Earning, function () {
                            if (this.OrderCloseLossProfitSum >= 1000) {
                                thousandValue = 1000;
                                thousandKey = 'K';
                            }
                        })
                    }
                    $.each(mt4Earning, function () {

                        //结算的日期
                        optionWithdrawInfo.xAxis.data.push(GetLocaleDate(this.ClearingDate));

                        if (type == 1) {
                            //每天的资金回撤率 百分百
                            optionWithdrawInfo.series[0].data.push((this.TodayWithdrawRate * 100).toFixed(2));
                        } else if (type == 2) {
                            //每天平仓亏损金额之和  金额
                            optionWithdrawInfo.series[0].data.push((this.OrderCloseLossProfitSum / thousandValue));
                        }
                        else if (type == 3) {
                            //每天平仓亏损点数之和 点
                            optionWithdrawInfo.series[0].data.push(this.OrderCloseLossPointSum.toFixed(2));
                        }

                    })

                    if (type == 1) {
                        optionWithdrawInfo.yAxis.axisLabel.formatter = '{value} %';
                        //optionWithdrawInfo.tooltip.formatter = '{b} <br/>{a} : {c} %';
                    }
                    else if (type == 2) {
                        optionWithdrawInfo.yAxis.axisLabel.formatter = '{value} ' + thousandKey;
                        //if (thousandValue == 1000) {
                        //    optionWithdrawInfo.yAxis.axisLabel.formatter = '{value} ' + thousandKey;
                        //} else {
                        //    optionWithdrawInfo.yAxis.axisLabel.formatter = thousandKey + ' {value}';
                        //}
                        //optionWithdrawInfo.tooltip.formatter = '{b} <br/>{a} : {c} K';
                    } else {
                        optionWithdrawInfo.yAxis.axisLabel.formatter = '{value} ';
                        //optionWithdrawInfo.tooltip.formatter = '{b} <br/>{a} : {c} 点';
                    }

                    optionWithdrawInfo.tooltip.formatter = function (params, ticket, callback) {

                        var paramsStr = "";

                        var i = 0;
                        //['平仓盈亏之和累计', '平仓盈亏之和']
                        $.each(params, function () {

                            i++;
                            if (i == 1)
                                paramsStr = this.name + "<br />";

                            if (this.seriesName == "百分百") {
                                paramsStr += this.seriesName + "：" + this.value + "%<br />";
                            }
                            else if (this.seriesName == "金额") {

                                paramsStr += this.seriesName + "：" + (this.value).toFixed(2) + thousandKey + "<br />";

                                //if (thousandValue == 1000) {
                                //    paramsStr += this.seriesName + "：" + (this.value).toFixed(2) + thousandKey + "<br />";
                                //} else {
                                //    paramsStr += this.seriesName + "：" + thousandKey + (this.value).toFixed(2) + "<br />";
                                //}
                            }
                            else if (this.seriesName == "点") {
                                paramsStr += this.seriesName + "：" + this.value + "点<br />";
                            }
                            else if (this.seriesName != "" && this.seriesName != null)
                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;
                    }


                    // 使用刚指定的配置项和数据显示图表。
                    myChart.setOption(optionWithdrawInfo);
                }

            }

            //增长率
            var optionBaseInfo = {
                backgroundColor: '#fff',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                        type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                    formatter: '{b} <br/>{a} : {c}'
                },
                xAxis: {
                    data: [],
                    name: '',
                    silent: false,
                    axisLine: { onZero: true },
                    splitLine: { show: false },
                    splitArea: { show: false }
                },
                yAxis: {
                    inverse: false,
                    splitArea: { show: false },
                    axisLabel: {
                        formatter: '{value}'
                    }
                },
                legend: {
                    data: []
                },
                grid: {
                    left: 100
                },
                series: [
                    {
                        name: [],
                        type: 'bar',
                        data: [],
                        itemStyle: {
                            normal: { color: '#67b7de' }

                        }
                    },
                    {
                        name: '净值',
                        type: 'line',
                        data: []
                    },
                    {
                        name: '收益率',
                        type: 'line',
                        data: []
                    }
                ]
            };

            //余额
            var optionBalanceInfo = {
                backgroundColor: '#fff',
                tooltip: {
                    trigger: 'axis',
                    formatter: '{b} <br/>{a} : {c}',
                    axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                        type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                },
                xAxis: {
                    data: [],
                    name: '',
                    silent: false,
                    axisLine: { onZero: true },
                    splitLine: { show: false },
                    splitArea: { show: false }
                },
                yAxis: {
                    inverse: false,
                    splitArea: { show: false },
                    axisLabel: {
                        formatter: '{value} K'
                    }
                },
                legend: {
                    data: []
                },
                grid: {
                    left: 100
                },
                series: [
                    {
                        name: '净值',
                        type: 'line',
                        data: []
                    },
                    {
                        name: '余额',
                        type: 'line',
                        data: []
                    },
                    {
                        name: '',
                        type: 'bar',
                        data: [],
                    }
                ]
            };

            //利润
            var optionProfitInfo = {
                backgroundColor: '#fff',
                tooltip: {
                    trigger: 'axis',
                    formatter: '{b} <br/>{a} : {c} K',
                    axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                        type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                },
                xAxis: {
                    data: [],
                    name: '',
                    silent: false,
                    axisLine: { onZero: true },
                    splitLine: { show: false },
                    splitArea: { show: false }
                },
                yAxis: {
                    inverse: false,
                    splitArea: { show: false },
                    axisLabel: {
                        formatter: '{value} K'
                    }
                },
                legend: {
                    data: ['平仓盈亏之和累计', '平仓盈亏之和']
                },
                grid: {
                    left: 100
                },
                series: [
                    {
                        name: '平仓盈亏之和累计',
                        type: 'line',
                        data: []
                    },
                    {
                        name: '平仓盈亏之和',
                        type: 'bar',
                        data: [],
                    }
                ]
            };

            //资金回撤
            var optionWithdrawInfo = {
                backgroundColor: '#fff',
                tooltip: {
                    trigger: 'axis',
                    formatter: '{b} <br/>{a} : {c} K',
                    axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                        type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    }
                },
                xAxis: {
                    data: [],
                    name: '',
                    silent: false,
                    axisLine: { onZero: true },
                    splitLine: { show: false },
                    splitArea: { show: false }
                },
                yAxis: {
                    inverse: false,
                    splitArea: { show: false },
                    axisLabel: {
                        formatter: '{value} K'
                    }
                },
                legend: {
                    data: []
                },
                grid: {
                    left: 100
                },
                series: [

                    {
                        name: '',
                        type: 'bar',
                        data: [],
                    }
                ]
            };

    </script>


    <script type="text/javascript">

            function ShowMonthABS(a,b,c)
            {
                ShowABS(a, b, c);
                SetPageHeightAuto();
            }

            function MonthChart() {
                SearchValidYear();
                currencyBase.GetCurrencyData();
                //多头和空头的平均持仓时间
                currencyBuyAndSellBase.GetCurrencyBuyAndSellData();
            }
            ///查找有数据的年份
            function SearchValidYear() {
                $.ajax({
                    url: '/Home/SearchValidYear',
                    type: "post",
                    data: { 'MTAccount': mt4, 'PlatID': platform },
                    async: false,
                    success: function (data) {
                        if (data.state) {
                            var yearCount = data.data.length;
                            var tempYear;
                            $("#Jtab2").html("");
                            for (var i = 0; i < yearCount; i++) {
                                tempYear = data.data[i];
                                if (i == yearCount - 1) {
                                    year = tempYear;
                                    $("#Jtab2").append("<li class=\"on\" data-value='" + tempYear + "'><a href='javascript:void (0)' onclick='SelectYear(" + tempYear + "," + i + ")'>" + tempYear + "</a></li>");
                                } else {
                                    $("#Jtab2").append("<li data-value='" + tempYear + "'><a href='javascript:void (0)' onclick='SelectYear(" + tempYear + "," + i + ")'>" + tempYear + "</a></li>");
                                }
                            }
                            SelectYear(year, yearCount - 1);
                        }
                    }
                })
                SetPageHeightAuto();
            }
            //设置月分析栏目的class
            function SetMonthSubClass(type) {
                $("#MonthProfitRateBtn").removeClass("hover");
                $("#MonthProfitBtn").removeClass("hover");
                $("#MonthHandBtn").removeClass("hover");
                $("#MonthPointBtn").removeClass("hover");

                if (type == 1)
                    $("#MonthProfitRateBtn").addClass("hover");
                else if (type == 2)
                    $("#MonthProfitBtn").addClass("hover");
                else if (type == 3)
                    $("#MonthHandBtn").addClass("hover");
                else if (type == 4)
                    $("#MonthPointBtn").addClass("hover");
            }

            //事件
            //选择当前的年份
            function SelectYear(n, t) {
                year = n;
                monthBase.Init();
                monthBase.GetMonthData();

                if (monthBase.MonthBaseData != null) {

                    monthBase.ParseAndRender(monthBase.MonthBaseData, 1);

                    yearTotalCharts.GetYearData();

                    //每次切换年份 交易数据要跟随变化
                    monthBase.GetMonthTradeData();
                }

                $("#Jtab2>li").removeClass("on");
                $("#Jtab2>li").eq(t).addClass("on");

                $(".growthrate_btnsMonth > button").siblings().removeClass("hover");
                $("#MonthProfitRateBtn").addClass("hover");
                SetPageHeightAuto();
            }

            //月度分析报告 右边统计分析图表
            var optionTotalYear = {
                xAxis: [
                    {
                        type: 'category',
                        data: ['全年', '总计'],
                        axisTick: {
                            alignWithLabel: true
                        }
                    }
                ],
                yAxis: [
                    {
                        show: false,
                        type: 'value'
                    }
                ],
                series: [
                    {
                        name: '利润',
                        type: 'bar',
                        barWidth: '70%',
                        data: [],
                        label: {
                            normal: {
                                show: true,
                                formatter: '{c}',//{a}:
                                position: [5, -20],
                                textStyle: {
                                    color: '#000'
                                }
                            }
                        }
                        //itemStyle: {
                        //    normal: { color: '#f7d672' }
                        //}
                    }
                ]
            };

            //月度分析报告 右边统计分析图表
            //年利润：统计每年平仓单盈亏之和
            //总利润：累计全部平仓单盈亏之和
            var yearCharts;
            var yearTotalCharts = {
                Init: function () {
                    $("#TotalYearCharts").html("");
                    yearCharts = echarts.init(document.getElementById("TotalYearCharts"));
                },
                //得到指定年份的统计数据
                GetYearData: function () {
                    $.ajax({
                        type: "post",
                        url: "/Home/SearchYearProfit",
                        data: {
                            "year": year, "MTAccount": mt4, "PlatID": platform, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        success: function (data) {

                            if (data.state) {

                                yearTotalCharts.YearSourceData = data.data;
                                //获得年份的利润
                                yearTotalCharts.RenderChart(1);
                            }
                        }, error: function (xhr) { alert(xhr.responseText) }
                    })
                },
                //年利润
                YearSourceData: [],
                //渲染数据 type=1收益率  2利润  3手数  4点数
                RenderChart: function (type) {

                    var data = yearTotalCharts.YearSourceData;

                    yearTotalCharts.Init();

                    if (data != null && data != []) {

                        optionTotalYear.series[0].data = [];
                        if (type == 1) {
                            optionTotalYear.series[0].name = "收益率";
                            optionTotalYear.series[0].data.push((data.YearProfitRate).toFixed(2));
                            optionTotalYear.series[0].data.push((data.TotalProfitRate).toFixed(2));
                            optionTotalYear.series[0].label.normal.formatter = "{c} %";//{a}:
                        } else if (type == 2) {
                            optionTotalYear.series[0].name = "利润";
                            optionTotalYear.series[0].data.push(data.YearProfit);
                            optionTotalYear.series[0].data.push(data.TotalProfit);
                            optionTotalYear.series[0].label.normal.formatter = "$ {c}";
                        }
                        else if (type == 3) {
                            optionTotalYear.series[0].name = "手数";
                            optionTotalYear.series[0].data.push(data.YearHand);
                            optionTotalYear.series[0].data.push(data.TotalHand);
                            optionTotalYear.series[0].label.normal.formatter = "{c} 手";
                        }
                        else if (type == 4) {
                            optionTotalYear.series[0].name = "点数";
                            optionTotalYear.series[0].data.push(data.YearPoint.toFixed(2));
                            optionTotalYear.series[0].data.push(data.TotalPoint.toFixed(2));
                            optionTotalYear.series[0].label.normal.formatter = "{c} 点";
                        }
                    }
                    else {
                        optionTotalYear.series[0].data.push(0);
                        optionTotalYear.series[0].data.push(0);
                    }

                    yearCharts.setOption(optionTotalYear);
                }

            }
            //月份
            var optionMonthBase = {
                color: ['#3398DB'],
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                        type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                    formatter: '{a} <br/>{b} : {c} %'
                },
                legend: {
                    data: []
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis:
                {
                    type: 'category',
                    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']

                },
                yAxis: [
                    {
                        type: 'value',
                        axisLabel: {
                            formatter: '{value}'
                        },
                    }

                ],
                visualMap: [{
                    show: false,
                    color: ["#67b7de", "#b083b0", "#f39b9a", "#5cb2b9", "#f9ba91", "#b6ce68", "#eecb71", "#cbe2f3", "#c3b1d0", "#97b27d", "#c26e71"]
                }],
                series:
                {
                    name: '',
                    type: 'bar',
                    barWidth: '60%',
                    data: [10, 52, 200, 334, 390, 330, 220],
                    label: {
                        normal: {
                            show: true,
                            formatter: '{c}',
                            position: [5, -20],
                            textStyle: {
                                color: '#000'
                            }
                        }
                    }
                    //itemStyle: {
                    //    normal: { color: '#bcd76d' }
                    //}
                }

            };


            var monthBaseChart;

            var monthBase = {
                //初始化月分析图表div
                Init: function () {
                    $("#MonthBaseCharts").html("");
                    monthBaseChart = echarts.init(document.getElementById('MonthBaseCharts'));

                    //点击月份 加载指定的月份信息
                    monthBaseChart.on('click', function (params) {

                        //构造当前的月份
                        var month = params.name.replace(/[^\d]/g, '');

                        ////////////////////////设置当前查找时间的范围
                        SetSelectMonth(month);

                        //月分析交易
                        monthBase.GetMonthTradeData();

                        ////月分析摘要
                        //monthBase.GetMonthSummary();

                        ////月分析小时
                        //hourBase.GetHourData();

                        ////日分析
                        //dayBase.GetDayData(1);

                        ////时间分析
                        //timeBase.GetTimeData(1);

                        //货币受欢迎程度
                        currencyBase.GetCurrencyData();

                        //多头和空头的平均持仓时间
                        currencyBuyAndSellBase.GetCurrencyBuyAndSellData();
                    });
                },
                MonthBaseData: [],
                //得到指定年份，月的数据
                GetMonthData: function () {
                    $.ajax({
                        url: "/Home/SearchStatisticsAccountRankYearToMonth",
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime, "year": year
                        },
                        async: false,
                        type: "post",
                        dataType: "json",
                        success: function (data) {
                            if (data.state) {
                                monthBase.MonthBaseData = data.data;

                                var month = 1;

                                //构造当前的时间
                                $.each(monthBase.MonthBaseData, function () {
                                    if (this.HandCount > 0)
                                        month = this.Title.replace(/[^\d]/g, '');
                                })

                                SetSelectMonth(month);
                            }
                        }
                    })
                },
                //得到月份的交易信息
                GetMonthTradeData: function () {
                    //设置按钮背景的颜色
                    setTab1('jobs', 1, 5);
                    $.ajax({
                        url: "/Home/StatisticsAccountMonthTradeInfo",
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        async: false,
                        type: "post",
                        beforeSend: function () { $("#jcenter").mask("Loging..."); },
                        complete: function () { $("#jcenter").unmask(); },
                        success: function (data) {
                            if (data.state) {
                                var m = data.data;
                                $("#ClosePositionCount").html(m.ClosePositionCount);
                                $("#SumProfitPoint").html(m.SumProfitPoint.toFixed(2));
                                $("#AverageProfit").html(m.AverageProfit.toFixed(2));
                                $("#AverageDeficit").html(m.AverageDeficit.toFixed(2));
                                $("#ClosePositionSum").html(m.ClosePositionSum);
                                $("#BestPositionMoney").html(m.BestPositionMoney);
                                $("#BestPositionMoneyTime").html(m.BestPositionMoneyTime);
                                $("#WorstPositionMoney").html(m.WorstPositionMoney);
                                $("#WorstPositionMoneyTime").html(m.WorstPositionMoneyTime);
                                $("#BestPositionPoint").html(m.BestPositionPoint);
                                $("#BestPositionPointTime").html(m.BestPositionPointTime);
                                $("#WorstPositionPoint").html(m.WorstPositionPoint);
                                $("#WorstPositionPointTime").html(m.WorstPositionPointTime);
                                $("#AverageCreatePositionTime").html(Number(m.AverageCreatePositionTime).toFixed(2) + "分钟");
                                $("#StandardDeviation").html("$" + (m.StandardDeviation).toFixed(2));
                                $("#SharpRate").html((m.SharpRate).toFixed(2));
                                $("#StandardGrade").html((m.StandardGrade).toFixed(2));
                                $("#AverageOnePoint").html(m.AverageOnePoint.toFixed(2) + "点");
                                $("#AverageOneProfit").html((m.AverageOneProfit).toFixed(2));
                                $("#ArithmeticAverageRate").html((m.ArithmeticAverageRate * 100).toFixed(2) + "%");
                                $("#GeometryAverageRate").html((m.GeometryAverageRate * 100).toFixed(2) + "%");
                                $("#TotalBuyPosition").html(m.TotalBuyPosition);
                                $("#ProfitBuyPosition").html(m.ProfitBuyPosition);
                                $("#TotalBuyPositionRate").html(((m.ProfitBuyPosition / (m.TotalBuyPosition == 0 ? 1 : m.TotalBuyPosition)) * 100).toFixed(2) + "%");
                                $("#TotalSellPosition").html(m.TotalSellPosition);
                                $("#ProfitSellPosition").html(m.ProfitSellPosition);
                                $("#TotalSellPositionRate").html(((m.ProfitSellPosition / (m.TotalSellPosition == 0 ? 1 : m.TotalSellPosition)) * 100).toFixed(2) + "%");
                                $("#SumProfitRate").html(m.SumProfitRate.toFixed(2));
                                //盈亏对比 ProfitClosePositionCount盈利的笔数 ClosePositionCount总笔数
                                $(".probar_in").css("width", (m.ProfitClosePositionCount / m.ClosePositionCount) * 100 + "%");
                                $("#spleft").html(((m.ProfitClosePositionCount / m.ClosePositionCount) * 100).toFixed(2) + "%");
                                $("#spright").html(((1 - (m.ProfitClosePositionCount / m.ClosePositionCount)) * 100).toFixed(2) + "%");
                                $("#SumFee").html(m.SumFee);
                            } else {

                                $("#ClosePositionCount").html(0);
                                $("#SumProfitPoint").html(0);
                                $("#AverageProfit").html(0);
                                $("#AverageDeficit").html(0);
                                $("#ClosePositionSum").html(0);
                                $("#BestPositionMoney").html(0);
                                $("#BestPositionMoneyTime").html('');
                                $("#WorstPositionMoney").html(0);
                                $("#WorstPositionMoneyTime").html('');
                                $("#BestPositionPoint").html(0);
                                $("#BestPositionPointTime").html('');
                                $("#WorstPositionPoint").html(0);
                                $("#WorstPositionPointTime").html('');
                                $("#AverageCreatePositionTime").html("0分钟");
                                $("#StandardDeviation").html("$0");
                                $("#SharpRate").html("0.00");
                                $("#StandardGrade").html('0.00');
                                $("#AverageOnePoint").html("0.00点");
                                $("#AverageOneProfit").html("0.00%");
                                $("#ArithmeticAverageRate").html("0.00%");
                                $("#GeometryAverageRate").html("0.00%");
                                $("#TotalBuyPosition").html(0);
                                $("#ProfitBuyPosition").html(0);
                                $("#TotalBuyPositionRate").html("0.00%");
                                $("#TotalSellPosition").html(0);
                                $("#ProfitSellPosition").html(0);
                                $("#TotalSellPositionRate").html("0%");
                                $("#SumProfitRate").html("0");
                                //盈亏对比 ProfitClosePositionCount盈利的笔数 ClosePositionCount总笔数
                                $(".probar_in").css("width", "50%");
                                $("#spleft").html("50%");
                                $("#spright").html("50%");
                                $("#SumFee").html(0);
                            }
                        }
                    })
                    SetPageHeightAuto();
                },
                //解析并渲染数据 指定年份，月的数据
                ParseAndRender: function (data, type) {

                    optionMonthBase.xAxis.data = [];
                    optionMonthBase.series.data = [];
                    optionMonthBase.legend.data = [];

                    var seriesName = "";

                    if (type == 1) {
                        seriesName = "收益率";
                    }
                    else if (type == 2) {
                        seriesName = "利润";
                    }
                    else if (type == 3) {
                        seriesName = "手数";
                    }
                    else if (type == 4) {
                        seriesName = "点数";
                    }

                    optionMonthBase.legend.data.push(seriesName);
                    optionMonthBase.series.name = seriesName
                    if (data != null) {
                        $.each(data, function () {
                            optionMonthBase.xAxis.data.push(this.Title);
                            //收益率
                            if (type == 1) {
                                optionMonthBase.series.data.push((this.AccountRate * 100).toFixed(2));
                                optionMonthBase.series.label.normal.formatter = "{c} %"
                            }
                            //收益
                            else if (type == 2) {
                                optionMonthBase.series.data.push(this.ProfitCount.toFixed(2));
                                optionMonthBase.series.label.normal.formatter = "$ {c}"
                            }
                            //手数
                            else if (type == 3) {
                                optionMonthBase.series.data.push(this.HandCount.toFixed(2));
                                optionMonthBase.series.label.normal.formatter = "{c} 手"
                            }
                            //点数
                            else if (type == 4) {
                                optionMonthBase.series.data.push(this.PointCount.toFixed(2));
                                optionMonthBase.series.label.normal.formatter = "{c} 点"
                            }
                        })

                        if (type == 1) {
                            optionMonthBase.yAxis[0].axisLabel.formatter = '{value} %';
                            optionMonthBase.tooltip.formatter = "{a} <br/>{b} : {c} %";
                        } else {
                            optionMonthBase.yAxis[0].axisLabel.formatter = '{value} ';
                            optionMonthBase.tooltip.formatter = "{a} <br/>{b} : {c}";
                        }

                        monthBaseChart.setOption(optionMonthBase);

                    }
                },
                //得到指定月份的摘要表数据
                GetMonthSummary: function () {

                    //设置当前按钮的背景
                    setTab1('jobs', 2, 5);

                    $.ajax({
                        url: "/Home/StatisticsMonthSummary",
                        type: "post",
                        beforeSend: function () { $("#jcenter").mask("Loging..."); },
                        complete: function () { $("#jcenter").unmask(); },
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        success: function (data) {
                            if (data.state) {

                                var monthSummaryHtml = "";

                                var classOddOrEven = "odd";
                                var i = 1;

                                $("#OrderTbodyTbody").html("");

                                var index = 0;
                                $.each(data.data, function () {

                                    index++;

                                    if (i == 1) {
                                        classOddOrEven = "odd";
                                        i = 2;
                                    } else {
                                        classOddOrEven = "even";
                                        i = 1;
                                    }

                                    monthSummaryHtml = $("#MonthSummaryTemplate").html();
                                    monthSummaryHtml = monthSummaryHtml.replace("$CLassOddOrEven$", classOddOrEven)
                                        .replace("$Currency$", this.Currency)
                                        .replace("$BuyCount$", this.BuyCount)
                                        .replace("$BuyPoint$", this.BuyPoint.toFixed(2))
                                        .replace("$BuyProfit$", this.BuyProfit.toFixed(2))
                                        .replace("$SellCount$", this.SellCount)
                                        .replace("$SellPonint$", this.SellPonint.toFixed(2))
                                        .replace("$SellProfit$", this.SellProfit.toFixed(2))
                                        .replace("$TotalOrderCount$", this.TotalOrderCount)
                                        .replace("$TotalPointCount$", this.TotalPointCount.toFixed(2))
                                        .replace("$TotalProfitMoney$", this.TotalProfitMoney.toFixed(2))
                                        .replace("$Success$", this.Success)
                                        .replace("$SuccessRate$", ((this.Success / this.TotalOrderCount) * 100).toFixed(2))
                                        .replace("$Loss$", this.Loss)
                                        .replace("$LossRate$", ((this.Loss / this.TotalOrderCount) * 100).toFixed(2))
                                        .replace("$ABSChartsID$", "ABSCharts" + index)
                                        .replace("$Index$", index)
                                        .replace("$ProductName$", this.Currency);
                                    $("#OrderTbodyTbody").append(monthSummaryHtml);

                                });
                                SetPageHeightAuto();
                            }
                        }
                    })
                },
            }

            var hourChart;
            var hourBase = {
                Init: function () {

                    $("#HourChart").html("");
                    hourChart = echarts.init(document.getElementById('HourChart'));
                },
                //小时数据
                HourData: [],
                //得到小时的数据
                GetHourData: function () {

                    //设置当前按钮的背景
                    setTab1('jobs', 3, 5);

                    //alert("开始的时间：" + startTime + ";结束的时间：" + endTime);

                    $.ajax({
                        url: "/Home/StatisticsMonthHour",
                        type: "post",
                        beforeSend: function () { $("#jcenter").mask("Loging..."); },
                        complete: function () { $("#jcenter").unmask(); },
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        async: true,
                        success: function (data) {

                            if (data.state) {
                                hourBase.HourData = data.data;

                                //初始化小时数据
                                hourBase.SelectProfitAndLoss(1);
                            }
                            SetPageHeightAuto();
                        }
                    })
                },
                //1盈利与亏损,2多单与空单,3多单与空单收益之比,4盈利与亏损的比例
                HourType: 1,
                //设置时间的type
                SetHourType: function (type) {
                    hourBase.HourType = type;

                    if (type == 1 || type == 2) {
                        $("#HourSubOption").hide();
                    } else if (type == 3 || type == 4) {
                        $("#HourSubOption").show();
                    }
                },
                //盈利与亏损
                SelectProfitAndLoss: function (type) {
                    hourBase.SetHourType(type);
                    hourBase.Init();

                    if (hourBase.HourData == null || hourBase.HourData.length <= 0)
                        hourBase.GetHourData();

                    hourBase.optionHour.legend.data = [];

                    hourBase.optionHour.legend.data.push("盈利");
                    hourBase.optionHour.legend.data.push("亏损");

                    hourBase.optionHour.xAxis[0].data = [];
                    hourBase.optionHour.series[0].data = [];
                    hourBase.optionHour.series[1].data = [];
                    hourBase.optionHour.series[0].name = "盈利";
                    hourBase.optionHour.series[0].stack = "盈利与亏损";
                    hourBase.optionHour.series[1].name = "亏损";
                    hourBase.optionHour.series[1].stack = "盈利与亏损";

                    hourBase.optionHour.tooltip.formatter = function (params, ticket, callback) {

                        var paramsStr = "";

                        var i = 0;

                        $.each(params, function () {

                            i++;
                            if (i == 1)
                                paramsStr = this.name + "<br />";

                            paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;
                    }

                    $.each(hourBase.HourData, function () {

                        hourBase.optionHour.xAxis[0].data.push(this.TimeFlag);
                        hourBase.optionHour.series[0].data.push(this.ProfitCount);
                        hourBase.optionHour.series[1].data.push(this.LossCount);
                    });

                    hourChart.setOption(hourBase.optionHour);

                    $(".growthrate_btnsHour > li").siblings().removeClass("hover").end();
                    $(".growthrate_btnsHour > li").eq(0).addClass("hover");
                },
                //盈利与亏损的比例
                SelectProfitAndLossRate: function (type, flag) {
                    hourBase.SetHourType(type);

                    hourBase.Init();

                    if (hourBase.HourData == null || hourBase.HourData.length <= 0)
                        hourBase.GetHourData();

                    hourBase.optionHour.legend.data = [];
                    hourBase.optionHour.xAxis[0].data = [];
                    hourBase.optionHour.series[0].data = [];
                    hourBase.optionHour.series[1].data = [];

                    var seriesBuyName = "";
                    var seriesSellName = "";

                    if (flag == 1) {
                        seriesBuyName = "盈利点数";
                        seriesSellName = "亏损点数";
                    }
                    else if (flag == 2) {
                        seriesBuyName = "盈利收益额";
                        seriesSellName = "亏损收益额";
                    }
                    else if (flag == 3) {
                        seriesBuyName = "盈利收益率";
                        seriesSellName = "亏损收益率";
                    }

                    hourBase.optionHour.legend.data.push(seriesBuyName);
                    hourBase.optionHour.legend.data.push(seriesSellName);
                    hourBase.optionHour.series[0].name = seriesBuyName;
                    hourBase.optionHour.series[0].stack = "多单与空单收益之比";
                    hourBase.optionHour.series[1].name = seriesSellName;
                    hourBase.optionHour.series[1].stack = "多单与空单收益之比";

                    hourBase.optionHour.tooltip.formatter = function (params, ticket, callback) {

                        var paramsStr = "";

                        var i = 0;

                        $.each(params, function () {

                            i++;
                            if (i == 1)
                                paramsStr = this.name + "<br />";

                            if (this.seriesName == "盈利收益率") {
                                paramsStr += this.seriesName + "：" + this.value + "%<br />";
                            }
                            else if (this.seriesName == "亏损收益率") {
                                paramsStr += this.seriesName + "：" + this.value + "%<br />";
                            }
                            else
                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;
                    }

                    $.each(hourBase.HourData, function () {

                        hourBase.optionHour.xAxis[0].data.push(this.TimeFlag);

                        //点数
                        if (flag == 1) {
                            hourBase.optionHour.series[0].data.push(this.ProfitPointCount.toFixed(2));
                            hourBase.optionHour.series[1].data.push(this.LossPointCount.toFixed(2));
                        }
                        //收益额
                        else if (flag == 2) {
                            hourBase.optionHour.series[0].data.push(this.ProfitMoney.toFixed(2));
                            hourBase.optionHour.series[1].data.push(this.LossMoney.toFixed(2));
                        }
                        //收益率
                        else if (flag == 3) {
                            hourBase.optionHour.series[0].data.push(((this.ProfitRate) * 100).toFixed(2));
                            hourBase.optionHour.series[1].data.push(((this.LossRate) * 100).toFixed(2));
                        }
                    });

                    hourChart.setOption(hourBase.optionHour);

                    $(".growthrate_btnsHourSub > button").siblings().removeClass("hover").end();
                    $(".growthrate_btnsHourSub > button").eq(0).addClass("hover");
                },
                //多单与空单
                SelectSellAndBuy: function (type) {
                    hourBase.SetHourType(type);

                    hourBase.Init();

                    if (hourBase.HourData == null || hourBase.HourData.length <= 0)
                        hourBase.GetHourData();

                    hourBase.optionHour.legend.data = [];

                    hourBase.optionHour.legend.data.push("多单");
                    hourBase.optionHour.legend.data.push("空单");

                    hourBase.optionHour.xAxis[0].data = [];
                    hourBase.optionHour.series[0].data = [];
                    hourBase.optionHour.series[1].data = [];
                    hourBase.optionHour.series[0].name = "多单";
                    hourBase.optionHour.series[0].stack = "多单与空单";
                    hourBase.optionHour.series[1].name = "空单";
                    hourBase.optionHour.series[1].stack = "多单与空单";

                    hourBase.optionHour.tooltip.formatter = function (params, ticket, callback) {

                        var paramsStr = "";

                        var i = 0;

                        $.each(params, function () {

                            i++;
                            if (i == 1)
                                paramsStr = this.name + "<br />";

                            paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;
                    }

                    $.each(hourBase.HourData, function () {

                        hourBase.optionHour.xAxis[0].data.push(this.TimeFlag);
                        hourBase.optionHour.series[0].data.push(this.BuyCount);
                        hourBase.optionHour.series[1].data.push(this.SellCount);
                    });

                    hourChart.setOption(hourBase.optionHour);

                },
                //多单与空单收益之比
                SelectSellAndBuyRate: function (type, flag) {
                    hourBase.SetHourType(type);

                    hourBase.Init();

                    if (hourBase.HourData == null || hourBase.HourData.length <= 0)
                        hourBase.GetHourData();

                    hourBase.optionHour.legend.data = [];
                    hourBase.optionHour.xAxis[0].data = [];
                    hourBase.optionHour.series[0].data = [];
                    hourBase.optionHour.series[1].data = [];

                    var seriesBuyName = "";
                    var seriesSellName = "";

                    if (flag == 1) {
                        seriesBuyName = "多单点数";
                        seriesSellName = "空单点数";
                    }
                    else if (flag == 2) {
                        seriesBuyName = "多单收益额";
                        seriesSellName = "空单收益额";
                    }
                    else if (flag == 3) {
                        seriesBuyName = "多单收益率";
                        seriesSellName = "空单收益率";
                    }

                    hourBase.optionHour.legend.data.push(seriesBuyName);
                    hourBase.optionHour.legend.data.push(seriesSellName);
                    hourBase.optionHour.series[0].name = seriesBuyName;
                    hourBase.optionHour.series[0].stack = "多单与空单收益之比";
                    hourBase.optionHour.series[1].name = seriesSellName;
                    hourBase.optionHour.series[1].stack = "多单与空单收益之比";

                    hourBase.optionHour.tooltip.formatter = function (params, ticket, callback) {

                        var paramsStr = "";

                        var i = 0;

                        $.each(params, function () {

                            i++;
                            if (i == 1)
                                paramsStr = this.name + "<br />";

                            if (this.seriesName == "多单收益率") {
                                paramsStr += this.seriesName + "：" + this.value + "%<br />";
                            }
                            else if (this.seriesName == "空单收益率") {
                                paramsStr += this.seriesName + "：" + this.value + "%<br />";
                            }
                            else
                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                        })

                        return paramsStr;
                    }

                    $.each(hourBase.HourData, function () {

                        hourBase.optionHour.xAxis[0].data.push(this.TimeFlag);

                        //点数
                        if (flag == 1) {
                            hourBase.optionHour.series[0].data.push(this.BuyPointCount.toFixed(2));
                            hourBase.optionHour.series[1].data.push(this.SellPointCount.toFixed(2));
                        }
                        //收益额
                        else if (flag == 2) {
                            hourBase.optionHour.series[0].data.push(this.BuyMoney.toFixed(2));
                            hourBase.optionHour.series[1].data.push(this.SellMoney.toFixed(2));
                        }
                        //收益率
                        else if (flag == 3) {
                            hourBase.optionHour.series[0].data.push((this.BuyProfitRate * 100).toFixed(2));
                            hourBase.optionHour.series[1].data.push((this.SellProfitRate * 100).toFixed(2));
                        }

                    });

                    hourChart.setOption(hourBase.optionHour);

                    $(".growthrate_btnsHourSub > button").siblings().removeClass("hover").end();
                    $(".growthrate_btnsHourSub > button").eq(0).addClass("hover");
                },
                //点数、获利、利润的选项
                HourSubOption: function (flag) {
                    //1盈利与亏损,2多单与空单,3多单与空单收益之比,4盈利与亏损的比例
                    if (hourBase.HourType == 1) {
                        hourBase.SelectProfitAndLoss(hourBase.HourType);
                    }
                    else if (hourBase.HourType == 2) {
                        hourBase.SelectSellAndBuy(hourBase.HourType);
                    }
                    else if (hourBase.HourType == 3) {
                        hourBase.SelectSellAndBuyRate(hourBase.HourType, flag);
                    }
                    else if (hourBase.HourType == 4) {
                        hourBase.SelectProfitAndLossRate(hourBase.HourType, flag);
                    }
                },
                //时间图表option
                optionHour: {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                        }
                    },
                    legend: {
                        data: ['其他']
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [
                        {
                            type: 'category',
                            data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
                        }
                    ],
                    yAxis: [
                        {
                            type: 'value'
                        }
                    ],
                    series: [

                        {
                            name: '',
                            type: 'bar',
                            stack: '',
                            data: [],
                            label: {
                                normal: {
                                    show: true,
                                    position: 'inside'

                                }
                            },
                            itemStyle: {
                                normal: { color: '#d1e8fa' }

                            }
                        },
                        {
                            name: '',
                            type: 'bar',
                            stack: '',
                            data: [],
                            label: {
                                normal: {
                                    show: true,
                                    position: 'inside'

                                }
                            },
                            itemStyle: {
                                normal: { color: '#ceca68' }

                            }
                        }
                    ]
                }
            }

            //day的数据
            var dayChart;
            var dayBase = {
                Init: function () {
                    $("#DayChart").html("");
                    dayChart = echarts.init(document.getElementById('DayChart'));
                },
                //天的数据
                DayData: [],
                //得到天的数据
                GetDayData: function (type) {

                    //设置当前按钮的背景
                    setTab1('jobs', 4, 5);

                    $.ajax({
                        url: "/Home/StatisticsMonthDay",
                        type: "post",
                        beforeSend: function () { $("#jcenter").mask("Loging..."); },
                        complete: function () { $("#jcenter").unmask(); },
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        async: true,
                        success: function (data) {
                            if (data.state) {
                                dayBase.DayData = data.data;

                                if (dayBase.DayData != null && dayBase.DayData.length > 0)
                                    //初始化时加载的数据
                                    dayBase.SelectProfitAndLoss(type);
                                SetPageHeightAuto();
                            }
                        }
                    })
                },
                //1盈利与亏损,2多单与空单,3多单与空单收益之比,4盈利与亏损的比例
                DayType: 1,
                //设置时间的type
                SetDayType: function (type) {
                    dayBase.DayType = type;

                    if (type == 1 || type == 2) {
                        $("#DaySubOption").hide();
                    } else if (type == 3 || type == 4) {
                        $("#DaySubOption").show();
                    }
                },
                //盈利与亏损
                SelectProfitAndLoss: function (type) {
                    dayBase.SetDayType(type);
                    dayBase.Init();

                    if (dayBase.DayData == null || dayBase.DayData.length <= 0)
                        dayBase.GetDayData(type);
                    else {

                        dayBase.optionDay.legend.data = [];
                        dayBase.optionDay.legend.data.push("盈利");
                        dayBase.optionDay.legend.data.push("亏损");

                        dayBase.optionDay.xAxis[0].data = [];
                        dayBase.optionDay.series[0].data = [];
                        dayBase.optionDay.series[1].data = [];
                        dayBase.optionDay.series[0].name = "盈利";
                        dayBase.optionDay.series[0].stack = "盈利与亏损";
                        dayBase.optionDay.series[1].name = "亏损";
                        dayBase.optionDay.series[1].stack = "盈利与亏损";

                        dayBase.optionDay.tooltip.formatter = function (params, ticket, callback) {

                            var paramsStr = "";

                            var i = 0;

                            $.each(params, function () {

                                i++;
                                if (i == 1)
                                    paramsStr = this.name + "<br />";

                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                            })

                            return paramsStr;
                        }

                        $.each(dayBase.DayData, function () {

                            dayBase.optionDay.xAxis[0].data.push(this.TimeFlag);
                            dayBase.optionDay.series[0].data.push(this.ProfitCount.toFixed(2));
                            dayBase.optionDay.series[1].data.push(this.LossCount.toFixed(2));
                        });

                        dayChart.setOption(dayBase.optionDay);
                    }

                    $(".growthrate_btnsDay > li").siblings().removeClass("hover");
                    $(".growthrate_btnsDay > li").eq(0).addClass("hover");
                },
                //盈利与亏损的比
                SelectProfitAndLossRate: function (type, flag) {
                    dayBase.SetDayType(type);
                    dayBase.Init();

                    if (dayBase.DayData == null || dayBase.DayData.length <= 0)
                        dayBase.GetDayData(type);
                    else {

                        dayBase.optionDay.legend.data = [];
                        dayBase.optionDay.xAxis[0].data = [];
                        dayBase.optionDay.series[0].data = [];
                        dayBase.optionDay.series[1].data = [];

                        var seriesBuyName = "";
                        var seriesSellName = "";

                        if (flag == 1) {

                            seriesBuyName = "盈利点数";
                            seriesSellName = "亏损点数";
                        }
                        else if (flag == 2) {
                            seriesBuyName = "盈利收益额";
                            seriesSellName = "亏损收益额";
                        }
                        else if (flag == 3) {
                            seriesBuyName = "盈利收益率";
                            seriesSellName = "亏损收益率";
                        }

                        dayBase.optionDay.legend.data.push(seriesBuyName);
                        dayBase.optionDay.legend.data.push(seriesSellName);
                        dayBase.optionDay.series[0].name = seriesBuyName;
                        dayBase.optionDay.series[0].stack = "盈利与亏损的比例";
                        dayBase.optionDay.series[1].name = seriesSellName;
                        dayBase.optionDay.series[1].stack = "盈利与亏损的比例";

                        dayBase.optionDay.xAxis[0].data = [];
                        dayBase.optionDay.series[0].data = [];
                        dayBase.optionDay.series[1].data = [];

                        dayBase.optionDay.tooltip.formatter = function (params, ticket, callback) {

                            var paramsStr = "";

                            var i = 0;

                            $.each(params, function () {

                                i++;
                                if (i == 1)
                                    paramsStr = this.name + "<br />";

                                if (this.seriesName == "盈利收益率") {
                                    paramsStr += this.seriesName + "：" + this.value + "%<br />";
                                }
                                else if (this.seriesName == "亏损收益率") {
                                    paramsStr += this.seriesName + "：" + this.value + "%<br />";
                                }
                                else
                                    paramsStr += this.seriesName + "：" + this.value + "<br />";
                            })

                            return paramsStr;
                        }

                        $.each(dayBase.DayData, function () {

                            dayBase.optionDay.xAxis[0].data.push(this.TimeFlag);

                            //点数
                            if (flag == 1) {
                                dayBase.optionDay.series[0].data.push(this.ProfitPointCount.toFixed(2));
                                dayBase.optionDay.series[1].data.push(this.LossPointCount.toFixed(2));
                            }
                            //收益额
                            else if (flag == 2) {
                                dayBase.optionDay.series[0].data.push(this.ProfitMoney.toFixed(2));
                                dayBase.optionDay.series[1].data.push(this.LossMoney.toFixed(2));
                            }
                            //收益率
                            else if (flag == 3) {
                                dayBase.optionDay.series[0].data.push((this.ProfitRate * 100).toFixed(2));
                                dayBase.optionDay.series[1].data.push((this.LossRate * 100).toFixed(2));
                            }
                        });

                        dayChart.setOption(dayBase.optionDay);

                        $(".growthrate_btnsDaySub > button").siblings().removeClass("hover").end();
                        $(".growthrate_btnsDaySub > button").eq(0).addClass("hover");
                    }
                },
                //多单与空单
                SelectSellAndBuy: function (type) {
                    dayBase.SetDayType(type);
                    dayBase.Init();

                    if (dayBase.DayData == null || dayBase.DayData.length <= 0)
                        dayBase.GetDayData(type);
                    else {

                        dayBase.optionDay.legend.data = [];
                        dayBase.optionDay.legend.data.push("多单");
                        dayBase.optionDay.legend.data.push("空单");

                        dayBase.optionDay.xAxis[0].data = [];
                        dayBase.optionDay.series[0].data = [];
                        dayBase.optionDay.series[1].data = [];
                        dayBase.optionDay.series[0].name = "多单";
                        dayBase.optionDay.series[0].stack = "多单与空单";
                        dayBase.optionDay.series[1].name = "空单";
                        dayBase.optionDay.series[1].stack = "多单与空单";

                        dayBase.optionDay.tooltip.formatter = function (params, ticket, callback) {

                            var paramsStr = "";

                            var i = 0;

                            $.each(params, function () {

                                i++;
                                if (i == 1)
                                    paramsStr = this.name + "<br />";

                                paramsStr += this.seriesName + "：" + this.value + "<br />";
                            })

                            return paramsStr;
                        }

                        $.each(dayBase.DayData, function () {

                            dayBase.optionDay.xAxis[0].data.push(this.TimeFlag);
                            dayBase.optionDay.series[0].data.push(this.BuyCount.toFixed(2));
                            dayBase.optionDay.series[1].data.push(this.SellCount.toFixed(2));
                        });

                        dayChart.setOption(dayBase.optionDay);
                    }
                },
                //多单与空单收益之比
                SelectSellAndBuyRate: function (type, flag) {
                    dayBase.SetDayType(type);

                    dayBase.Init();

                    if (dayBase.DayData == null || dayBase.DayData.length <= 0)
                        dayBase.GetDayData(type);
                    else {

                        dayBase.optionDay.legend.data = [];
                        dayBase.optionDay.xAxis[0].data = [];
                        dayBase.optionDay.series[0].data = [];
                        dayBase.optionDay.series[1].data = [];

                        var seriesBuyName = "";
                        var seriesSellName = "";

                        if (flag == 1) {
                            seriesBuyName = "多单点数";
                            seriesSellName = "空单点数";
                        }
                        else if (flag == 2) {
                            seriesBuyName = "多单收益额";
                            seriesSellName = "空单收益额";
                        }
                        else if (flag == 3) {
                            seriesBuyName = "多单收益率";
                            seriesSellName = "空单收益率";
                        }

                        dayBase.optionDay.legend.data.push(seriesBuyName);
                        dayBase.optionDay.legend.data.push(seriesSellName);
                        dayBase.optionDay.series[0].name = seriesBuyName;
                        dayBase.optionDay.series[0].stack = "多单与空单收益之比";
                        dayBase.optionDay.series[1].name = seriesSellName;
                        dayBase.optionDay.series[1].stack = "多单与空单收益之比";

                        dayBase.optionDay.xAxis[0].data = [];
                        dayBase.optionDay.series[0].data = [];
                        dayBase.optionDay.series[1].data = [];

                        dayBase.optionDay.tooltip.formatter = function (params, ticket, callback) {

                            var paramsStr = "";

                            var i = 0;

                            $.each(params, function () {

                                i++;
                                if (i == 1)
                                    paramsStr = this.name + "<br />";

                                if (this.seriesName == "多单收益率") {
                                    paramsStr += this.seriesName + "：" + this.value + "%<br />";
                                }
                                else if (this.seriesName == "空单收益率") {
                                    paramsStr += this.seriesName + "：" + this.value + "%<br />";
                                }
                                else
                                    paramsStr += this.seriesName + "：" + this.value + "<br />";
                            })

                            return paramsStr;
                        }

                        $.each(dayBase.DayData, function () {

                            dayBase.optionDay.xAxis[0].data.push(this.TimeFlag);

                            //点数
                            if (flag == 1) {
                                dayBase.optionDay.series[0].data.push(this.BuyPointCount.toFixed(2));
                                dayBase.optionDay.series[1].data.push(this.SellPointCount.toFixed(2));
                            }
                            //收益额
                            else if (flag == 2) {
                                dayBase.optionDay.series[0].data.push(this.BuyMoney.toFixed(2));
                                dayBase.optionDay.series[1].data.push(this.SellMoney.toFixed(2));
                            }
                            //收益率
                            else if (flag == 3) {
                                dayBase.optionDay.series[0].data.push((this.BuyProfitRate * 100).toFixed(2));
                                dayBase.optionDay.series[1].data.push((this.SellProfitRate * 100).toFixed(2));
                            }

                        });

                        dayChart.setOption(dayBase.optionDay);

                        $(".growthrate_btnsDaySub > button").siblings().removeClass("hover").end();
                        $(".growthrate_btnsDaySub > button").eq(0).addClass("hover");
                    }
                },
                //点数、收益额、收益率的选项
                DaySubOption: function (flag) {
                    $(".growthrate_btnsDay > button").siblings().removeClass("hover").end();
                    $(".growthrate_btnsDay").children("button").eq(1).addClass("hover");

                    //1盈利与亏损,2多单与空单,3多单与空单收益之比,4盈利与亏损的比例
                    if (dayBase.DayType == 1) {
                        dayBase.SelectProfitAndLoss(dayBase.DayType);
                    }
                    else if (dayBase.DayType == 2) {
                        dayBase.SelectSellAndBuy(dayBase.DayType);
                    }
                    else if (dayBase.DayType == 3) {
                        dayBase.SelectSellAndBuyRate(dayBase.DayType, flag);
                    }
                    else if (dayBase.DayType == 4) {
                        dayBase.SelectProfitAndLossRate(dayBase.DayType, flag);
                    }
                },
                //day图表option
                optionDay: {
                    tooltip: {
                        trigger: 'axis',
                        formatter: '',
                        axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                        }
                    },
                    legend: {

                        data: ['其他']
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: [
                        {
                            type: 'category',
                            data: []
                        }
                    ],
                    yAxis: [
                        {
                            type: 'value'
                        }
                    ],
                    series: [

                        {
                            name: '',
                            type: 'bar',
                            stack: '',
                            data: [],
                            label: {
                                normal: {
                                    show: true,
                                    position: 'inside'
                                }
                            }
                        },
                        {
                            name: '',
                            type: 'bar',
                            stack: '',
                            data: [],
                            label: {
                                normal: {
                                    show: true,
                                    position: 'inside'
                                }
                            }
                        }
                    ]

                }
            }

            //时间
            var timeChart;
            var timeBase = {

                Init: function () {
                    $("#TimeChart").html("");
                    timeChart = echarts.init(document.getElementById('TimeChart'));
                },
                //时间的数据
                TimeSourceData: [],
                //得到初始化的数据
                GetTimeData: function (type) {

                    //设置当前按钮的背景
                    setTab1('jobs', 5, 5);

                    $.ajax({
                        url: "/Home/StatisticsMonthTime",
                        type: "post",
                        beforeSend: function () { $("#jcenter").mask("Loging..."); },
                        complete: function () { $("#jcenter").unmask(); },
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        async: true,
                        success: function (data) {
                            if (data.state) {
                                timeBase.TimeSourceData = data.data;

                                if (timeBase.TimeSourceData != null && timeBase.TimeSourceData.length > 0) {
                                    //初始化时加载的数据
                                    timeBase.SelectOption(type);
                                }
                                SetPageHeightAuto();
                            }
                        }
                    })

                    $(".growthrate_btnsTime > button").siblings().removeClass("hover").end();
                    $(".growthrate_btnsTime > button").eq(0).addClass("hover");
                },
                //选择项 1收益率 2点数 3利润 4手数
                SelectOption: function (type) {
                    //if (timeBase.TimeSourceData == null || timeBase.TimeSourceData.length <= 0) {
                    //    timeBase.GetTimeData(type);
                    //}
                    //else {
                    //}
                    timeBase.Init();

                    timeBase.OptionDataTime = [];

                    var temp = [];
                    var serLab = "";

                    $.each(timeBase.TimeSourceData, function () {

                        if (type == 1) {
                            serLab = "收益率";
                            temp.push(this.LongTime, (this.ProfitRate).toFixed(2));

                            timeBase.OptionDataTime.push(temp);
                        }
                        else if (type == 2) {
                            serLab = "点数";
                            temp.push(this.LongTime, this.Point.toFixed(2));

                            timeBase.OptionDataTime.push(temp);
                        }
                        else if (type == 3) {
                            serLab = "利润";
                            temp.push(this.LongTime, this.Profit.toFixed(2));

                            timeBase.OptionDataTime.push(temp);
                        }
                        else if (type == 4) {
                            serLab = "手数";
                            temp.push(this.LongTime, this.Hand.toFixed(2));

                            timeBase.OptionDataTime.push(temp);
                        }

                        temp = [];
                    })

                    timeBase.SchemaTime[1].text = serLab;
                    timeBase.OptionTime.yAxis.name = "";//serLab
                    timeBase.OptionTime.series[0].name = "持仓时间";
                    timeBase.OptionTime.series[0].itemStyle = timeBase.ItemStyleTime;
                    timeBase.OptionTime.series[0].data = timeBase.OptionDataTime;

                    timeChart.setOption(timeBase.OptionTime);
                },
                ItemStyleTime: {
                    normal: {
                        opacity: 0.8,
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowOffsetY: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                },
                SchemaTime: [
                    { name: 'date', index: 0, text: '分钟' },
                    { name: 'AQIindex', index: 1, text: 'AQI指数' }
                ],
                OptionDataTime: [],
                OptionTime: {
                    backgroundColor: '#fff',//404a59
                    grid: {
                        x: '10%',
                        x2: 150,
                        y: '18%',
                        y2: '10%'
                    },
                    tooltip: {
                        padding: 10,
                        borderColor: '#777',
                        borderWidth: 1,
                        formatter: function (obj) {
                            var value = obj.value;
                            return obj.seriesName + '：' + value[0] + '分钟<br>'
                                + timeBase.SchemaTime[1].text + '：' + value[1] + '<br>';
                            //return '<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">'
                            //    + obj.seriesName + '：' + value[0] + '分钟'
                            //    + '</div>'
                            //    + timeBase.SchemaTime[1].text + '：' + value[1] + '<br>';
                        }
                    },
                    xAxis: [{
                        type: 'value',
                        name: '',
                        nameGap: 16,
                        nameTextStyle: {
                            color: '#000',
                            fontSize: 14
                        },
                        //max: 30 * 5,
                        splitLine: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#000'
                            }
                        }
                    }],
                    yAxis: {
                        type: 'value',
                        name: '',
                        nameLocation: 'end',
                        nameGap: 20,
                        nameTextStyle: {
                            color: '#000',
                            fontSize: 16
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#000'
                            }
                        },
                        splitLine: {
                            show: false
                        }
                    },
                    series: [
                        {
                            name: '广州',
                            type: 'scatter',
                            itemStyle: [],
                            data: []
                        }
                    ]
                }
            }

            //货币的受欢迎程度
            var currencyChart;
            var currencyBase = {
                Init: function () {
                    $("#CurrencyChart").html("");
                    currencyChart = echarts.init(document.getElementById('CurrencyChart'));
                },
                //查找到的数据
                CurrencyData: [],
                //得到查找的数据
                GetCurrencyData: function () {
                    $.ajax({
                        url: "/Home/StatisticsCurrency",
                        type: "post",
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        async: true,
                        success: function (data) {
                            if (data.state) {
                                currencyBase.CurrencyData = data.data;
                                if (currencyBase.CurrencyData != null && currencyBase.CurrencyData.length > 0) {
                                    //初始化时加载的数据
                                    currencyBase.LoadCurrencyData();
                                }
                            }
                        }
                    })
                },
                //加载数据
                LoadCurrencyData: function () {
                    if (currencyBase.CurrencyData == null || currencyBase.CurrencyData.length <= 0) {
                        currencyBase.GetCurrencyData();
                    } else {

                        currencyBase.Init();

                        var data = { value: 0, name: '' };

                        currencyBase.OptionChart.series[0].data = [];

                        //计算出总的笔数
                        $.each(currencyBase.CurrencyData, function () {
                            data.value = this.TradeTimes;
                            data.name = this.Name + "：" + ((this.TradeTimes / this.TotalCount) * 100).toFixed(2) + "%";

                            currencyBase.OptionChart.series[0].data.push(data);

                            data = { value: 0, name: '' };
                        })

                        currencyChart.setOption(currencyBase.OptionChart);
                    }
                },
                OptionChart: {
                    tooltip: {
                        trigger: 'item',
                        formatter: "{a} <br/>{b} : {c} ({d}%)"
                    },
                    series: [
                        {
                            name: '货币',
                            type: 'pie',
                            radius: '40%',
                            center: ['50%', '60%'],
                            data: [
                                { value: 335, name: '' },
                                { value: 310, name: '' },
                                { value: 234, name: '' },
                                { value: 135, name: '' },
                                { value: 1548, name: '' }
                            ],
                            labelLine: {
                                normal: {
                                    length: 2,
                                }
                            },
                            itemStyle: {
                                emphasis: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        }
                    ]
                }
            }

            //平均持仓时间
            var currencyBuyAndSellChart;

            var currencyBuyAndSellBase = {
                Init: function () {
                    $("#BuyAndSellLongTimeChart").html("");
                    currencyBuyAndSellChart = echarts.init(document.getElementById("BuyAndSellLongTimeChart"));
                },
                SourceData: [],
                //得到平均持仓时间数据
                GetCurrencyBuyAndSellData: function () {
                    $.ajax({
                        url: "/Home/StatisticsCurrencyBuyAndSell",
                        type: "post",
                        data: {
                            "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "clearingTime": clearingTime
                        },
                        async: true,
                        beforeSend: function () { $("#jmonthdown").mask("Loging..."); },
                        complete: function () { $("#jmonthdown").unmask(); },
                        success: function (data) {
                            if (data.state) {
                                currencyBuyAndSellBase.SourceData = data.data;
                                if (currencyBuyAndSellBase.SourceData != null && currencyBuyAndSellBase.SourceData.length > 0) {
                                    //初始化时加载的数据
                                    currencyBuyAndSellBase.LoadCurrencyBuyAndSellData();
                                }
                            }
                        }, error: function (xhr) { }
                    })
                },
                //解析数据
                LoadCurrencyBuyAndSellData: function () {
                    if (currencyBuyAndSellBase.SourceData == null || currencyBuyAndSellBase.SourceData.length <= 0) {
                        currencyBuyAndSellBase.GetCurrencyBuyAndSellData();
                    } else {

                        currencyBuyAndSellBase.Init();

                        currencyBuyAndSellBase.Option.yAxis.data = [];
                        currencyBuyAndSellBase.Option.series[0].data = [];
                        currencyBuyAndSellBase.Option.series[1].data = [];

                        currencyBuyAndSellBase.Option.series[0].name = "多头";
                        currencyBuyAndSellBase.Option.series[1].name = "空头";

                        $.each(currencyBuyAndSellBase.SourceData, function () {
                            currencyBuyAndSellBase.Option.yAxis.data.push(this.Name);
                            currencyBuyAndSellBase.Option.series[0].data.push((this.BuyLongTime / this.LongTime).toFixed(2));
                            currencyBuyAndSellBase.Option.series[1].data.push((this.SellLongTime / this.LongTime).toFixed(2));
                        })

                        currencyBuyAndSellChart.setOption(currencyBuyAndSellBase.Option);
                    }
                },
                Option: {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: {
                        type: 'value'
                    },
                    yAxis: {
                        type: 'category',
                        //offset: '20',
                        //data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
                    },
                    series: [
                        {
                            name: '多头',
                            type: 'bar',
                            stack: '总量',
                            label: {
                                normal: {
                                    show: true,
                                    position: 'insideRight'
                                }
                            },
                            //data: [320, 302, 301, 334, 390, 330, 320],
                            itemStyle: {
                                normal: { color: '#eecb71' }

                            }
                        },
                        {
                            name: '空投',
                            type: 'bar',
                            stack: '总量',
                            label: {
                                normal: {
                                    show: true,
                                    position: 'insideRight'
                                }
                            },
                            data: [120, 132, 101, 134, 90, 230, 210],
                            itemStyle: {
                                normal: { color: '#cbe2f3' }

                            }
                        }
                    ]
                }
            }

    </script>

    <!--交易明细 end-->
    <script type="text/javascript">

            function SetSelectMonth(m) {
                //switch (Number(month)) {
                //    case 1:
                //    case 3:
                //    case 5:
                //    case 7:
                //    case 8:
                //    case 10:
                //    case 12:
                //        startTime = year + "-" + month + "-01";
                //        endTime = year + "-" + month + "-31";
                //        break;
                //    case 2:
                //        startTime = year + "-" + month + "-01";

                //        if (year % 4 == 0) {
                //            endTime = year + "-02-29";
                //        } else
                //            endTime = year + "-02-28";

                //        break;
                //    case 4:
                //    case 6:
                //    case 9:
                //    case 11:
                //        startTime = year + "-" + month + "-01";
                //        endTime = year + "-" + month + "-30";
                //        break;
                //    default:
                //        startTime = "";
                //        endTime = "";
                //        break;
                //}
                month = m;
                $("#MonthTitle").html(month + "月份统计")
            }

            $(function () {
                $("#JCTDetailCheck").click(function () {

                    if ($("#JCTDetailCheck").is(":checked")) {
                        jctOrder.SearchJCTData(4, false);
                    } else {
                        jctOrder.SearchJCTData(3, false);
                    }
                })
            })
            function setTab1(name, cursel, n) {
                for (i = 1; i <= n; i++) {
                    var menu = document.getElementById(name + i);
                    var con = document.getElementById("mcdetails_" + name + "_" + i);
                    menu.className = i == cursel ? "hover" : "";
                    con.style.display = i == cursel ? "block" : "none";
                }
            }
    </script>
    <!--月度分析报告 end-->
    <!--月分析 摘要数据图表 start-->
    <script type="text/javascript">

            var absType = 1;//1 利润   2 点
            var absIndex = 1;//第几个图表
            var absProductName = "";//产品的名称
            var absChart;//图表对象

            //设置数据图表
            var absChartInfo = {
                backgroundColor: '#eee',
                tooltip: {
                    trigger: "axis",
                    formatter: "",
                    axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                        type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                },
                legend: {
                    data: ['多头盈亏金额', '空头盈亏金额', '总盈亏金额']
                },
                xAxis: {
                    data: [],
                    name: '',
                    silent: false,
                    axisLine: { onZero: true },
                    splitLine: { show: false },
                    splitArea: { show: false }
                },
                yAxis: {
                    inverse: false,
                    splitArea: { show: false }
                },
                grid: {
                    left: 100
                },
                series: [

                    {
                        name: '多头盈亏金额',
                        type: 'line',
                        data: []
                    },
                    {
                        name: '空头盈亏金额',
                        type: 'line',
                        data: []
                    }, {
                        name: "总盈亏金额",
                        type: 'bar',
                        stack: 'one',
                        data: [],
                        itemStyle: {
                            normal: { color: '#c67174' }
                        }
                    }
                ]
            };

            var absBase = {
                //初始化图表
                Init: function () {
                    $("#ABSCharts" + absIndex).html("");
                    absChart = echarts.init(document.getElementById("ABSCharts" + absIndex));
                },
                //数据源数据
                ABSData: [],
                //查找数据
                GetData: function () {
                    $.ajax({
                        url: "/Home/StatisticsMonthSummaryDayProfitInfo",
                        type: "post",
                        data: { "MTAccount": mt4, "PlatID": platform, "year": year, "month": month, "startTime": startTime, "endTime": endTime, "currency": absProductName, "clearingTime": clearingTime },
                        success: function (data) {
                            if (data.state) {
                                absBase.ABSData = data.data;
                                absBase.RenderHtml();
                            }
                        }
                    })
                },
                //渲染页面
                RenderHtml: function () {

                    if (absBase.ABSData != null && absBase.ABSData != [] && absBase.ABSData.length > 0) {
                        //渲染页面图表数据
                        absBase.Init();

                        var absXAxisBase = [];
                        var absDataBar = [];
                        var absDataLine1 = [];//多头
                        var absDataLine2 = [];//空头

                        $.each(absBase.ABSData, function () {

                            absXAxisBase.push(this.DayDate);

                            //利润
                            if (absType == 1) {
                                absDataBar.push(this.DayProfit);
                                absDataLine1.push(this.BuyProfit);
                                absDataLine2.push(this.SellProfit);
                            }
                            //点
                            else if (absType == 2) {
                                absDataBar.push(this.DayPoint);
                                absDataLine1.push(this.BuyPoint);
                                absDataLine2.push(this.SellPoint);
                            }
                        });

                        absChartInfo.legend.data = [];

                        if (absType == 1) {
                            absChartInfo.legend.data.push('多头盈亏金额');
                            absChartInfo.legend.data.push('空头盈亏金额');
                            absChartInfo.legend.data.push('总盈亏金额');
                            absChartInfo.series[0].name = '多头盈亏金额';
                            absChartInfo.series[1].name = '空头盈亏金额';
                            absChartInfo.series[2].name = '总盈亏金额';

                        }
                        else if (absType == 2) {
                            absChartInfo.legend.data.push('多头点数');
                            absChartInfo.legend.data.push('空头点数');
                            absChartInfo.legend.data.push('总点数');
                            absChartInfo.series[0].name = '多头点数';
                            absChartInfo.series[1].name = '空头点数';
                            absChartInfo.series[2].name = '总点数';
                        }

                        absChartInfo.tooltip.formatter = function (params, ticket, callback) {

                            var paramsStr = "";

                            var i = 0;

                            $.each(params, function () {

                                i++;
                                if (i == 1)
                                    paramsStr = this.name + "<br />";

                                //if (this.seriesName == "多头盈亏金额") {
                                //    paramsStr += this.seriesName + "：" + this.value.toFixed(2) + "<br />";
                                //}
                                //else if (this.seriesName == "空头盈亏金额") {
                                //    paramsStr += this.seriesName + "：" + this.value.toFixed(2) + "<br />";
                                //}
                                //else if (this.seriesName == "总盈亏金额") {
                                //    paramsStr += this.seriesName + "：" + this.value.toFixed(2) + "<br />";
                                //}
                                //else
                                paramsStr += this.seriesName + "：" + this.value.toFixed(2) + "<br />";
                            })

                            return paramsStr;
                        }


                        absChartInfo.xAxis.data = absXAxisBase;
                        absChartInfo.series[0].data = absDataLine1;
                        absChartInfo.series[1].data = absDataLine2;
                        absChartInfo.series[2].data = absDataBar;

                        absChart.setOption(absChartInfo);
                    }
                }
            }

            //显示摘要下面的图片
            function ShowABS(e, i, prodectName) {
                absIndex = i;
                absProductName = prodectName;

                if ($(e).parent().parent().next().css("display") == "none") {
                    $(e).parent().parent().next().show();
                    $(e).parent().parent().next().siblings(".abs_chart").hide();
                } else {
                    $(e).parent().parent().next().hide();
                }

                absBase.GetData();
            }

            //需要显示数据的类型 1利润 2点
            function SetABSType(type) {
                absType = type;

                //渲染页面
                absBase.GetData();
            }
    </script>

    <!--交易明细 数据筛选-->
    <script type="text/javascript">

            $(function () {
                $("#jDataTab>ul>li").each(function (index) {
                    $(this).click(function () {
                        $("#jDataTab>ul>li").removeClass("on");
                        $("#jDataTab>ul>li").eq(index).addClass("on");
                        var val = $("#jDataTab>ul>li").eq(index).data("value");
                        $("#jPage>.con").addClass("dnone");
                        $("#page" + val).removeClass("dnone");
                        if (val == 0) {
                            SetPageHeight("1000px");
                        }
                        else if (val == 1) {
                            $("#jcontent").mask("Loging...");
                            MonthChart();
                            $("#jcontent").unmask();
                            SetPageHeightAuto();
                        } else if (val == 2) {
                        } else if (val == 3)
                        {
                            SetPageHeight("1000px");
                        }
                    });
                });

                $("#Jtab1>li").each(function (index) {
                    $(this).click(function () {
                        $("#Jtab1>li").removeClass("on");
                        $("#Jtab1>li").eq(index).addClass("on");
                        var val = $("#Jtab1>li").eq(index).data("value");
                    });
                });

                $("#jtab3>li").each(function (index) {
                    $(this).click(function () {
                        $("#jtab3>li").removeClass("on");
                        $("#jtab3>li").eq(index).addClass("on");
                        var val = $("#jtab3>li").eq(index).data("value");
                        $("#tb3content>.tab-bdn").addClass("dnone");
                        $("#tab3page" + val).removeClass("dnone");
                    });
                });

                $("#btnAnaly").click(function () { analyBind(); });

                //tradeCost();
            });

            function sleep(numberMillis) {
                var now = new Date();
                var exitTime = now.getTime() + numberMillis;
                while (true) {
                    now = new Date();
                    if (now.getTime() > exitTime)
                        return;
                }
            }

            function tab3Click() {
                $("#jcontent").mask("Loging...");
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: '/Home/GetTradeCount',
                    data: {
                        'MTAccount': mt4, 'PlatID': platform, "startTime": startTime, "endTime": endTime
                    },
                    success: function (data) {
                        if (data.state) {
                            $("#openCouSpan").text(data.data.OpenCount);
                            $("#closeCouSpan").text(data.data.ClosedCount);
                            openOrders();
                        }
                    }
                });
                $("#jcontent").unmask();
            }

            //持仓查询
            function openOrders() {
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: '/Home/GetOpenCount',
                    data: {
                        'MTAccount': mt4, 'PlatID': platform, "startTime": startTime, "endTime": endTime, 'PageSize': 10
                    },
                    success: function (data) {
                        if (data.state == false || data.count == 0) {
                            $("#openDt>tr").remove();
                            $("#openDt").append("<tr><td colspan='10'>暂无数据</td></tr>");
                            $("#OpenTotal").css("display", "none");
                            SetPageHeightAuto();
                        } else {
                            ///  收益率（<span class=\"red\">" + data.data.ProfitRate + "%
                            var TotalHtml = "总计：手数（" + data.data.TotalLots + "）   /  获利（<span class=\"red\">" + data.data.TotalProfit + "</span>）  /  手续费（" + data.data.TotalHandFee + "）   /  库存费（" + data.data.TotalStockFee + "）   </span>";
                            $("#OpenTotal").html(TotalHtml);
                            $.jqPaginator('#pagination1', {
                                totalPages: data.count,
                                pageSize: 10,
                                visiblePages: 1,
                                currentPage: 1,
                                prev: '<li class="prev"><a href="javascript:void(0);">上一页<\/a><\/li>',
                                next: '<li class="next"><a href="javascript:void(0);">下一页<\/a><\/li>',
                                page: '<li class="page"><a href="javascript:void(0);"> {{page}} / {{totalPages}} <\/a><\/li>',
                                onPageChange: function (page) {
                                    $.ajax({
                                        type: "POST",
                                        url: '/Home/GetOpenOrderList',
                                        data: {
                                            'MTAccount': mt4, 'PlatID': platform, "startTime": startTime, "endTime": endTime, 'PageIndex': page, 'PageSize': 10
                                        },
                                        success: function (data) {
                                            if (data.state) {
                                                $("#openDt>tr").remove();
                                                $.each(data.data, function (index, dt) {
                                                    var _typebuy = "Buy";
                                                    var _typeclass = "green";
                                                    if (dt.OrderType == 1) {
                                                        _typebuy = "Sell";
                                                        _typeclass = "red";
                                                    }
                                                    $("#openDt").append("<tr style=\"background:#FFF\"><td>" + dt.OrderNo + "</td><td> " + dt.OrderSymbol + "</td><td><strong class=\"" + _typeclass + "\">" + _typebuy + "</strong></td><td>" + dt.OrderLots + "</td><td>" + moment(dt.OpenDate).format('YYYY/MM/DD HH:mm:ss') + "</td><td>" + dt.OpenPrice + "</td><td>" + dt.HandFee + "</td><td>" + dt.StockFee + "</td><td>" + dt.Profit + "</td></tr>");  //将返回的数据追加到表格
                                                });
                                            }
                                            SetPageHeightAuto();
                                        }
                                    });
                                }
                            });
                        }
                    }
                });
            }
            //平仓历史查询
            function closedHist() {
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: '/Home/GetCloseCount',
                    data: {
                        'MTAccount': mt4, 'PlatID': platform, "startTime": startTime, "endTime": endTime, 'PageSize': 10
                    },
                    success: function (data) {
                        if (data.state == false || data.count == 0) {
                            $("#closdDt>tr").remove();
                            $("#closdDt").append("<tr><td colspan='10'>暂无数据</td></tr>");
                            $("#ClosedTotal").css("display", "none");
                        } else {
                            var TotalHtml = "总计：手数（" + data.data.TotalLots + "）   /  获利（<span class=\"red\">" + data.data.TotalProfit + "</span>）  /  手续费（" + data.data.TotalHandFee + "）   /  库存费（" + data.data.TotalStockFee + "）   /  收益率（<span class=\"red\">" + 2708.27 + "%</span>）";
                            $("#ClosedTotal").html(TotalHtml);
                            $.jqPaginator('#pagination2', {
                                totalPages: data.count,
                                pageSize: 10,
                                visiblePages: 1,
                                currentPage: 1,
                                prev: '<li class="prev"><a href="javascript:void(0);">上一页<\/a><\/li>',
                                next: '<li class="next"><a href="javascript:void(0);">下一页<\/a><\/li>',
                                page: '<li class="page"><a href="javascript:void(0);"> {{page}} / {{totalPages}} <\/a><\/li>',
                                onPageChange: function (page) {
                                    $.ajax({
                                        type: "POST",
                                        url: '/Home/GetCloseOrderList',
                                        data: {
                                            'MTAccount': mt4, 'PlatID': platform, "startTime": startTime, "endTime": endTime, 'PageIndex': page, 'PageSize': 10
                                        },
                                        //beforeSend: function () { $("#tab3page2").mask("Loging..."); },
                                        //complete: function () { $("#tab3page2").unmask(); },
                                        success: function (data) {
                                            if (data.state) {
                                                $("#closdDt>tr").remove();
                                                $.each(data.data, function (index, dt) {
                                                    var _typebuy = "Buy";
                                                    var _typeclass = "green";
                                                    if (dt.OrderType == 1) {
                                                        _typebuy = "Sell";
                                                        _typeclass = "red";
                                                    }
                                                    var _bag = "";
                                                    var row = parseInt(index % 2);
                                                    if (row == 0)
                                                    {
                                                        _bag = "background:#FFF";
                                                    }
                                                    $("#closdDt").append("<tr style=\"background:#FFF\"><td>" + dt.OrderNo + "</td><td> " + dt.OrderSymbol + "</td><td><strong class=\"" + _typeclass + "\">" + _typebuy + "</strong></td><td>" + dt.OrderLots + "</td><td>" + moment(dt.OpenDate).format('YYYY/MM/DD HH:mm:ss') + "</td><td>" + moment(dt.CloseDate).format('YYYY/MM/DD HH:mm:ss') + "</td><td>" + dt.OpenPrice + "</td><td>" + dt.ClosePrice + "</td><td>" + dt.HandFee + "</td><td>" + dt.StockFee + "</td><td>" + dt.Profit + "</td><td class=\"red\">" + dt.Income + "%</td></tr>");  //将返回的数据追加到表格
                                                });
                                            } SetPageHeightAuto();
                                        }

                                    });
                                }
                            });
                        }
                    }

                });
            };

            function positionOrders() {
                $.ajax({
                    type: "post",
                    dataType: "text",
                    url: '/Home/GetPositionCount',
                    data: {
                        'MTAccount': mt4, 'PlatID': platform, "startTime": startTime, "endTime": endTime, 'IsDeatil': true, 'PageSize': 10
                    },
                    success: function (datacou) {
                        if (datacou == "0") {
                            $("#positionDt>tr").remove();
                            $("#positionDt").append("<tr><td colspan='10'>暂无数据</td></tr>");
                        } else {
                            $.jqPaginator('#pagination3', {
                                totalPages: parseInt(datacou),
                                pageSize: 10,
                                visiblePages: 1,
                                currentPage: 1,
                                prev: '<li class="prev"><a href="javascript:void(0);">上一页<\/a><\/li>',
                                next: '<li class="next"><a href="javascript:void(0);">下一页<\/a><\/li>',
                                page: '<li class="page"><a href="javascript:void(0);"> {{page}} / {{totalPages}} <\/a><\/li>',
                                onPageChange: function (page) {
                                    $.ajax({
                                        type: "POST",
                                        url: '/Home/GetPositionList',
                                        data: {
                                            'MTAccount': mt4, 'PlatID': platform, "startTime": startTime, "endTime": endTime, 'IsDeatil': true, 'PageIndex': page, 'PageSize': 10
                                        },
                                        success: function (data) {
                                            if (data.state) {
                                                $("#positionDt>tr").remove();
                                                $.each(data.data, function (index, dt) {
                                                    var _typebuy = "Buy";
                                                    var _typeclass = "green";
                                                    if (dt.OrderType == 1) {
                                                        _typebuy = "Sell";
                                                        _typeclass = "red";
                                                    }
                                                    $("#positionDt").append("<tr style=\"background:#FFF\"><td>" + dt.OrderSymbol + "</td><td><strong class=\"" + _typeclass + "\">" + _typebuy + "</strong></td><td>" + dt.OrderLots + "</td><td>" + dt.OpenPrice + "</td><td>" + dt.Points + "</td><td>" + dt.HandFee + "</td><td>" + dt.StockFee + "</td><td>" + dt.Profit + "</td><td>" + dt.ProfitRate + "%</td></tr>");  //将返回的数据追加到表格
                                                });
                                            }
                                            SetPageHeightAuto();
                                        }
                                    });
                                }
                            });
                        }
                    }
                });
            }

            function tradeCost() {
                var _symbol = $("#symbolName").val();
                $.ajax({
                    type: "post",
                    dataType: "text",
                    url: '/Home/GetTradeCostCount',
                    data: {
                        'MTAccount': mt4, 'PlatID': platform, 'Symbol': _symbol,'PageSize': 10
                    },
                    success: function (datacou) {
                        if (datacou == "0") {
                            $("#TradeCost>tr").remove();
                            $("#TradeCost").append("<tr><td colspan='3'>暂无数据</td></tr>");
                        } else {
                            $.jqPaginator('#pagination5', {
                                totalPages: parseInt(datacou),
                                pageSize: 10,
                                visiblePages: 1,
                                currentPage: 1,
                                prev: '<li class="prev"><a href="javascript:void(0);">上一页<\/a><\/li>',
                                next: '<li class="next"><a href="javascript:void(0);">下一页<\/a><\/li>',
                                page: '<li class="page"><a href="javascript:void(0);"> {{page}} / {{totalPages}} <\/a><\/li>',
                                onPageChange: function (page) {
                                    $.ajax({
                                        type: "POST",
                                        url: '/Home/GetTradeCostList',
                                        data: {
                                            'MTAccount': mt4, 'PlatID': platform, 'Symbol': _symbol, 'PageIndex': page, 'PageSize': 10
                                        },
                                        success: function (data) {
                                            if (data.state) {
                                                $("#TradeCost>tr").remove();
                                                if (_symbol != "")
                                                    $("#CostAvg").text("" + data.avgCost);
                                                else
                                                    $("#CostAvg").text("");
                                                $.each(data.data, function (index, dt) {
                                                    $("#TradeCost").append("<tr style=\"background:#FFF\"><td>" + moment(dt.UpdateDate).format('YYYY/MM/DD HH:mm:ss')+ "</td><td>" + dt.SymbolCode + "</td><td>" + dt.DiffPrice + "</td></tr>");  //将返回的数据追加到表格
                                                });
                                            }
                                            SetPageHeightAuto();
                                        }
                                    });
                                }
                            });
                        }
                    }
                });
            }


            //时间开始
            var now = new Date();
            var nowDayOfWeek = now.getDay();
            var nowDay = now.getDate();
            var nowMonth = now.getMonth();
            var nowYear = now.getYear();
            nowYear += (nowYear < 2000) ? 1900 : 0;
            var getCurrentDate = new Date(nowYear, nowMonth, nowDay);
            var getCurrentDate = formatDate(getCurrentDate)
            var getYesterdayDate = new Date(nowYear, nowMonth, nowDay - 1);
            var getYesterdayDate = formatDate(getYesterdayDate);

            var getMonthStartDate = new Date(nowYear, nowMonth, 1);
            var getMonthStartDate = formatDate(getMonthStartDate);

            var getWeekStartDate = new Date(nowYear, nowMonth, nowDay - nowDayOfWeek);
            var getWeekStartDate = formatDate(getWeekStartDate);

            var getWeekEndDate = new Date(nowYear, nowMonth, nowDay + (6 - nowDayOfWeek));
            var getWeekEndDate = formatDate(getWeekEndDate);

            var getTreeMonthStartDate = new Date(nowYear, nowMonth-3, nowDay);
            var getTreeMonthStartDate = formatDate(getTreeMonthStartDate);

            var getSixMonthStartDate = new Date(nowYear, nowMonth - 6, nowDay);
            var getSixMonthStartDate = formatDate(getSixMonthStartDate);

            var getYearStartDate = new Date(nowYear, nowMonth-12, nowDay);
            var getYearStartDate = formatDate(getYearStartDate);

            function formatDate(date) {
                var myyear = date.getFullYear();
                var mymonth = date.getMonth() + 1;
                var myweekday = date.getDate();

                if (mymonth < 10) {
                    mymonth = "0" + mymonth;
                }
                if (myweekday < 10) {
                    myweekday = "0" + myweekday;
                }
                return (myyear + "-" + mymonth + "-" + myweekday);
            }

            function GetDate(flag) {
                switch (flag) {
                    // 当天
                    case 0:
                        $('#date_beg').val(getYesterdayDate);
                        $('#date_end').val(getYesterdayDate);
                        break;
                    // 本周
                    case 1:
                        $('#date_beg').val(getWeekStartDate);
                        $('#date_end').val(getWeekEndDate);
                        break;
                    //最近三月
                    case 2:
                        $('#date_beg').val(getTreeMonthStartDate);
                        $('#date_end').val(getCurrentDate);
                        break;
                    // 最近六月
                    case 3:
                        $('#date_beg').val(getSixMonthStartDate);
                        $('#date_end').val(getCurrentDate);
                        break;
                    // 最近一年
                    case 4:
                        $('#date_beg').val(getYearStartDate);
                        $('#date_end').val(getCurrentDate);
                        break;
                    default:
                        $('#date_beg').val("");
                        $('#date_end').val("");
                        break;
                }
            }

            function analyBind()
            {
                var dtype = $("[name='ftime']:checked").val();
                var btime = $("#date_beg").val();
                var etime = $("#date_end").val();
                var _mt4 = "31A7CC1667F0F51063785D8AB3BC2D2C";       //帐号
                var _platid = "114";       //平台
                var _isshow = "0";
                if (btime.length < 1 || etime.length < 1)
                    window.location.href = "/" + _platid + "/" + _mt4 + "/" + _isshow;
                else
                    window.location.href = "/" + _platid + "/" + _mt4 + "/" + _isshow + "?dtype="+dtype+"&btime=" + btime + "&etime=" + etime + "";
            }

            function SearchBind()
            {
                tradeCost();
            }
           //时间结束
    </script>


    <script type="text/javascript">
            //固定框架高度
            function SetPageHeight(height) {
                try {
                    //let childDomain = document.domain;
                    document.domain = "linkusfx.com";
                    var oIframe = parent.document.getElementById(window.name);
                    if (oIframe != null) {
                        var _height = oIframe.contentWindow.document.body.scrollHeight;
                        oIframe.height = height;
                    }
                } catch(e){}
            }
            //自适应框架高度
            function SetPageHeightAuto() {
                try {
                    document.domain = "linkusfx.com";
                    var oIframe = parent.document.getElementById(window.name);
                    if (oIframe != null) {
                        var _height = oIframe.contentWindow.document.body.clientHeight+45;
                        oIframe.height = _height + "px";
                    }
                } catch(e){}
            }
    </script>

    <div class="loadingv-bg"></div>
    <div class="loadingv">
        <div class="lcont">正在加载</div>
    </div>
</body>
</html>
